<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="博客, 技术, 生物信息，精准医疗, 遗传咨询, 高通量技术, 算法, 学习, 作品, 写作, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>Valid tree - sy123.ml</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <h1><a href="https://sy123.ml/">sy123.ml</a></h1><h2><a href="https://sy123.ml/">winter is coming.</a></h2>
  </div>
  <nav><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>Valid tree</h1>
  </div>
<div class="meta">
  <div>2016-10-29 00:00</div>
  <div>
    <span><a href="https://sy123.ml/tags/algorithm/">#algorithm</a></span>
      </div>
  </div>
<div class="content">
  <p>DFS, BFS and Union-find comparison.</p>
<h3 id="judge-if-the-given-graph-is-a-tree">Judge if the given graph is a tree</h3>
<p>Remember to check 2 things:</p>
<ol>
<li>whether the graph has cycle</li>
<li>whether number connected component(s) is more than 1</li>
</ol>
<h4 id="dfs">DFS:</h4>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#75715e">// time: O(max(E,n)) space: O(n) for adjacency list
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">boolean</span> <span style="color:#75af00">validTree</span><span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">n</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">edges</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">visited</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#111">n</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
        <span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">Integer</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#111">adjList</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">ArrayList</span><span style="color:#f92672">&lt;</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">n</span><span style="color:#f92672">;</span> <span style="color:#111">i</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#111">adjList</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#00a8c8">new</span> <span style="color:#111">ArrayList</span><span style="color:#f92672">&lt;</span><span style="color:#111">Integer</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">e</span> <span style="color:#f92672">:</span> <span style="color:#111">edges</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#111">adjList</span><span style="color:#f92672">.</span><span style="color:#75af00">get</span><span style="color:#f92672">(</span><span style="color:#111">e</span><span style="color:#f92672">[</span><span style="color:#111">0</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#111">e</span><span style="color:#f92672">[</span><span style="color:#111">1</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#111">adjList</span><span style="color:#f92672">.</span><span style="color:#75af00">get</span><span style="color:#f92672">(</span><span style="color:#111">e</span><span style="color:#f92672">[</span><span style="color:#111">1</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#111">e</span><span style="color:#f92672">[</span><span style="color:#111">0</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">hasCycle</span><span style="color:#f92672">(</span><span style="color:#f92672">-</span><span style="color:#111">1</span><span style="color:#f92672">,</span> <span style="color:#111">0</span><span style="color:#f92672">,</span> <span style="color:#111">visited</span><span style="color:#f92672">,</span> <span style="color:#111">edges</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span> <span style="color:#75715e">// cycle case
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">:</span> <span style="color:#111">visited</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">i</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span> <span style="color:#f92672">}</span> <span style="color:#75715e">// not single connected components
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#00a8c8">private</span> <span style="color:#00a8c8">boolean</span> <span style="color:#75af00">hasCycle</span><span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">prev</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">int</span> <span style="color:#111">cur</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">visited</span><span style="color:#f92672">,</span> <span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">Integer</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#111">adjList</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">cur</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">1</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 1 means current vertex is being visited
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#111">Integer</span> <span style="color:#111">succ</span> <span style="color:#f92672">:</span> <span style="color:#111">adjList</span><span style="color:#f92672">.</span><span style="color:#75af00">get</span><span style="color:#f92672">(</span><span style="color:#111">cur</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">succ</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">prev</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">continue</span><span style="color:#f92672">;</span> <span style="color:#75715e">// exclude curr&#39;s prev node
</span><span style="color:#75715e"></span>            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">succ</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">1</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">true</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span> <span style="color:#75715e">// has cycle
</span><span style="color:#75715e"></span>            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">succ</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">hasCycle</span><span style="color:#f92672">(</span><span style="color:#111">cur</span><span style="color:#f92672">,</span> <span style="color:#111">succ</span><span style="color:#f92672">,</span> <span style="color:#111">visited</span><span style="color:#f92672">,</span> <span style="color:#111">adjList</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">true</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span> 
        <span style="color:#f92672">}</span>
        <span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">cur</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">2</span><span style="color:#f92672">;</span> <span style="color:#75715e">// complete visiting
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="bfs">BFS:</h4>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#75715e">// O(max(E,n)), space: O(n) for adjacency list
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">boolean</span> <span style="color:#75af00">validTree</span><span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">n</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">edges</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">visited</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#111">n</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
        <span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">Integer</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#111">adjList</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">ArrayList</span><span style="color:#f92672">&lt;</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">n</span><span style="color:#f92672">;</span> <span style="color:#111">i</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#111">adjList</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#00a8c8">new</span> <span style="color:#111">ArrayList</span><span style="color:#f92672">&lt;</span><span style="color:#111">Integer</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">e</span> <span style="color:#f92672">:</span> <span style="color:#111">edges</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#111">adjList</span><span style="color:#f92672">.</span><span style="color:#75af00">get</span><span style="color:#f92672">(</span><span style="color:#111">e</span><span style="color:#f92672">[</span><span style="color:#111">0</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#111">e</span><span style="color:#f92672">[</span><span style="color:#111">1</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#111">adjList</span><span style="color:#f92672">.</span><span style="color:#75af00">get</span><span style="color:#f92672">(</span><span style="color:#111">e</span><span style="color:#f92672">[</span><span style="color:#111">1</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#111">e</span><span style="color:#f92672">[</span><span style="color:#111">0</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#111">Deque</span><span style="color:#f92672">&lt;</span><span style="color:#111">Integer</span><span style="color:#f92672">&gt;</span> <span style="color:#111">queue</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">ArrayDeque</span><span style="color:#f92672">&lt;</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#111">queue</span><span style="color:#f92672">.</span><span style="color:#75af00">addLast</span><span style="color:#f92672">(</span><span style="color:#111">0</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">0</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">1</span><span style="color:#f92672">;</span> <span style="color:#75715e">// mark curr node as being visited
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">while</span> <span style="color:#f92672">(</span><span style="color:#f92672">!</span><span style="color:#111">queue</span><span style="color:#f92672">.</span><span style="color:#75af00">isEmpty</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">int</span> <span style="color:#111">cur</span> <span style="color:#f92672">=</span> <span style="color:#111">queue</span><span style="color:#f92672">.</span><span style="color:#75af00">removeFirst</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#111">Integer</span> <span style="color:#111">succ</span> <span style="color:#f92672">:</span> <span style="color:#111">adjList</span><span style="color:#f92672">.</span><span style="color:#75af00">get</span><span style="color:#f92672">(</span><span style="color:#111">cur</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">succ</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">1</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span> <span style="color:#75715e">// has cycle
</span><span style="color:#75715e"></span>                <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">succ</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">succ</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">1</span><span style="color:#f92672">;</span>
                    <span style="color:#111">queue</span><span style="color:#f92672">.</span><span style="color:#75af00">addLast</span><span style="color:#f92672">(</span><span style="color:#111">succ</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            <span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">cur</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">2</span><span style="color:#f92672">;</span> <span style="color:#75715e">// compete visiting
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">:</span> <span style="color:#111">visited</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">i</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span> <span style="color:#f92672">}</span> <span style="color:#75715e">// not single connected components
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">true</span><span style="color:#f92672">;</span>        
    <span style="color:#f92672">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="union-find">Union-find:</h4>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#75715e">// time: O(E), space: O(n) for union-find set
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">class</span> <span style="color:#75af00">UnionFind</span> <span style="color:#f92672">{</span>
        <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">parent</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">rank</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">int</span> <span style="color:#111">count</span><span style="color:#f92672">;</span>

        <span style="color:#111">UionFind</span><span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">n</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#111">parent</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#111">n</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
            <span style="color:#111">rank</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#111">n</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
            <span style="color:#111">count</span> <span style="color:#f92672">=</span> <span style="color:#111">n</span><span style="color:#f92672">;</span>
            <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">n</span><span style="color:#f92672">;</span> <span style="color:#111">i</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#111">parent</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">i</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span> <span style="color:#75715e">// initially each node&#39;s paren is itself
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">int</span> <span style="color:#75af00">find</span><span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">x</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">x</span> <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#111">parent</span><span style="color:#f92672">[</span><span style="color:#111">x</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#111">x</span> <span style="color:#f92672">=</span> <span style="color:#111">find</span><span style="color:#f92672">(</span><span style="color:#111">parent</span><span style="color:#f92672">[</span><span style="color:#111">x</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span> <span style="color:#75715e">// path compression
</span><span style="color:#75715e"></span>            <span style="color:#f92672">}</span>
            <span style="color:#00a8c8">return</span> <span style="color:#111">parent</span><span style="color:#f92672">[</span><span style="color:#111">x</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">boolean</span> <span style="color:#75af00">union</span><span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">x</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">int</span> <span style="color:#111">y</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">int</span> <span style="color:#111">X</span> <span style="color:#f92672">=</span> <span style="color:#111">find</span><span style="color:#f92672">(</span><span style="color:#111">x</span><span style="color:#f92672">)</span><span style="color:#f92672">,</span> <span style="color:#111">Y</span> <span style="color:#f92672">=</span> <span style="color:#111">find</span><span style="color:#f92672">(</span><span style="color:#111">y</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">X</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">Y</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span>
            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">rank</span><span style="color:#f92672">[</span><span style="color:#111">Y</span><span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">rank</span><span style="color:#f92672">[</span><span style="color:#111">X</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#111">parent</span><span style="color:#f92672">[</span><span style="color:#111">Y</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">X</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span> <span style="color:#75715e">// Y is lower
</span><span style="color:#75715e"></span>            <span style="color:#00a8c8">else</span> <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">rank</span><span style="color:#f92672">[</span><span style="color:#111">X</span><span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">rank</span><span style="color:#f92672">[</span><span style="color:#111">Y</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#111">parent</span><span style="color:#f92672">[</span><span style="color:#111">X</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">Y</span><span style="color:#f92672">;</span><span style="color:#f92672">}</span> <span style="color:#75715e">// X is lower
</span><span style="color:#75715e"></span>            <span style="color:#00a8c8">else</span> <span style="color:#f92672">{</span>  <span style="color:#75715e">// rank of X, Y is the same
</span><span style="color:#75715e"></span>                <span style="color:#111">parent</span><span style="color:#f92672">[</span><span style="color:#111">Y</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">X</span><span style="color:#f92672">;</span>
                <span style="color:#111">rank</span><span style="color:#f92672">[</span><span style="color:#111">X</span><span style="color:#f92672">]</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#111">count</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">;</span>
            <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">true</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>    
    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">boolean</span> <span style="color:#75af00">validTree</span><span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">n</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">edges</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#111">UnionFind</span> <span style="color:#111">uf</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">UnionFind</span><span style="color:#f92672">(</span><span style="color:#111">n</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">edge</span> <span style="color:#f92672">:</span> <span style="color:#111">edges</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">int</span> <span style="color:#111">x</span> <span style="color:#f92672">=</span> <span style="color:#111">edge</span><span style="color:#f92672">[</span><span style="color:#111">0</span><span style="color:#f92672">]</span><span style="color:#f92672">,</span> <span style="color:#111">y</span> <span style="color:#f92672">=</span> <span style="color:#111">edge</span><span style="color:#f92672">[</span><span style="color:#111">1</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#f92672">!</span><span style="color:#111">uf</span><span style="color:#f92672">.</span><span style="color:#75af00">union</span><span style="color:#f92672">(</span><span style="color:#111">x</span><span style="color:#f92672">,</span> <span style="color:#111">y</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span> <span style="color:#75715e">// has cycle
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">return</span> <span style="color:#111">uf</span><span style="color:#f92672">.</span><span style="color:#75af00">count</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">1</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
</code></pre></td></tr></table>
</div>
</div></div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2020 Zhili.</div>
  </div>
</footer>
</body>
</html>
