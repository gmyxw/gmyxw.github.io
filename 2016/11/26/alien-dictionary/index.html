<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="博客, 技术, 生物信息，精准医疗, 遗传咨询, 高通量技术, 算法, 学习, 作品, 写作, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>Alien dictionary - sy123.ml</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <h1><a href="https://sy123.ml/">sy123.ml</a></h1><h2><a href="https://sy123.ml/">winter is coming.</a></h2>
  </div>
  <nav><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>Alien dictionary</h1>
  </div>
<div class="meta">
  <div>2016-11-26 00:00</div>
  <div>
    <span><a href="https://sy123.ml/tags/algorithm/">#algorithm</a></span>
      </div>
  </div>
<div class="content">
  <p>Build a graph to solve alien dictionary problem via DFS/BFS.</p>
<!-- toc -->
<h1 id="alien-dictionary">Alien Dictionary</h1>
<p>There is a new alien language which uses the latin alphabet. However, the order among letters are unknown to you. You receive a list of words from the dictionary, where <strong>words are sorted lexicographically by the rules of this new language</strong>. Derive the order of letters in this language.</p>
<p>For example,</p>
<p>Given the following words in dictionary,</p>
<pre><code>[
  &quot;wrt&quot;,
  &quot;wrf&quot;,
  &quot;er&quot;,
  &quot;ett&quot;,
  &quot;rftt&quot;
]
</code></pre><p>The correct order is: &ldquo;wertf&rdquo;.</p>
<p>Note:</p>
<ol>
<li>You may assume all letters are in lowercase.</li>
<li>If the order is invalid, return an empty string ([&ldquo;abcd&rdquo;,&ldquo;ab&rdquo;] is invalid).</li>
<li>There may be multiple valid order of letters, return any one of them is fine.</li>
</ol>
<h1 id="method-1-dfs">Method 1: DFS</h1>
<p>Build the graph (post-adjacency list and visited list), then use <code>DFS</code> to build the correct order, while checking the loop at the same time.</p>
<p>Note:</p>
<ol>
<li>visited[]: -1(not exist), 0(no pre-node), 1(visiting), 2(visited)</li>
<li>The order of adding char into stringbuilder is reversed: add post nodes to sb firstly in order to avoid missing pre-nodes for current nodes later. e.g.: for correct order &ldquo;abc&rdquo;, if meet &lsquo;b&rsquo; firstly, build the sb as &ldquo;cb&rdquo;, and then meet &lsquo;a&rsquo;, build it as &ldquo;cba&rdquo;; otherwise, when meet &lsquo;b&rsquo;, build sb as &ldquo;bc&rdquo;, and then meet &lsquo;a&rsquo;, resulting in &ldquo;bca&rdquo;, which is incorrect.)</li>
</ol>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#00a8c8">private</span> <span style="color:#00a8c8">static</span> <span style="color:#00a8c8">int</span> <span style="color:#111">N</span> <span style="color:#f92672">=</span> <span style="color:#111">26</span><span style="color:#f92672">;</span>
    <span style="color:#00a8c8">public</span> <span style="color:#111">String</span> <span style="color:#75af00">alienOrder</span><span style="color:#f92672">(</span><span style="color:#111">String</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">words</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#00a8c8">boolean</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">adj</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#00a8c8">boolean</span><span style="color:#f92672">[</span><span style="color:#111">N</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#111">N</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">visited</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#111">N</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#f92672">!</span><span style="color:#111">buildGraph</span><span style="color:#f92672">(</span><span style="color:#111">words</span><span style="color:#f92672">,</span> <span style="color:#111">adj</span><span style="color:#f92672">,</span> <span style="color:#111">visited</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">return</span> <span style="color:#d88200">&#34;&#34;</span><span style="color:#f92672">;</span> <span style="color:#75715e">// &#34;abcd&#34; -&gt; &#34;ab&#34;
</span><span style="color:#75715e"></span>
        <span style="color:#111">StringBuilder</span> <span style="color:#111">sb</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">StringBuilder</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">N</span><span style="color:#f92672">;</span> <span style="color:#111">i</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#f92672">!</span><span style="color:#111">dfs</span><span style="color:#f92672">(</span><span style="color:#111">adj</span><span style="color:#f92672">,</span> <span style="color:#111">visited</span><span style="color:#f92672">,</span> <span style="color:#111">sb</span><span style="color:#f92672">,</span> <span style="color:#111">i</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">return</span> <span style="color:#d88200">&#34;&#34;</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">return</span> <span style="color:#111">sb</span><span style="color:#f92672">.</span><span style="color:#75af00">reverse</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">toString</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#00a8c8">private</span> <span style="color:#00a8c8">boolean</span> <span style="color:#75af00">dfs</span><span style="color:#f92672">(</span><span style="color:#00a8c8">boolean</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">adj</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">visited</span><span style="color:#f92672">,</span> <span style="color:#111">StringBuilder</span> <span style="color:#111">sb</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">int</span> <span style="color:#111">i</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">1</span><span style="color:#f92672">;</span>  <span style="color:#75715e">// visiting
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">j</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">j</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">N</span><span style="color:#f92672">;</span> <span style="color:#111">j</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">adj</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#111">j</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// connected post nodes
</span><span style="color:#75715e"></span>                <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">j</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">1</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span><span style="color:#f92672">;</span>  <span style="color:#75715e">// loop case
</span><span style="color:#75715e"></span>                <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">j</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#f92672">!</span><span style="color:#111">dfs</span><span style="color:#f92672">(</span><span style="color:#111">adj</span><span style="color:#f92672">,</span> <span style="color:#111">visited</span><span style="color:#f92672">,</span> <span style="color:#111">sb</span><span style="color:#f92672">,</span> <span style="color:#111">j</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">2</span><span style="color:#f92672">;</span> <span style="color:#75715e">// visited
</span><span style="color:#75715e"></span>        <span style="color:#111">sb</span><span style="color:#f92672">.</span><span style="color:#75af00">append</span><span style="color:#f92672">(</span><span style="color:#f92672">(</span><span style="color:#00a8c8">char</span><span style="color:#f92672">)</span><span style="color:#f92672">(</span><span style="color:#d88200">&#39;a&#39;</span> <span style="color:#f92672">+</span> <span style="color:#111">i</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>        
    <span style="color:#00a8c8">private</span> <span style="color:#00a8c8">boolean</span> <span style="color:#75af00">buildGraph</span><span style="color:#f92672">(</span><span style="color:#111">String</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">words</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">boolean</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">adj</span><span style="color:#f92672">,</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">visited</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#111">Arrays</span><span style="color:#f92672">.</span><span style="color:#75af00">fill</span><span style="color:#f92672">(</span><span style="color:#111">visited</span><span style="color:#f92672">,</span> <span style="color:#f92672">-</span><span style="color:#111">1</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span> <span style="color:#75715e">// init to not existed
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">words</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">;</span> <span style="color:#111">i</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">char</span> <span style="color:#111">c</span> <span style="color:#f92672">:</span> <span style="color:#111">words</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">]</span><span style="color:#f92672">.</span><span style="color:#75af00">toCharArray</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#111">visited</span><span style="color:#f92672">[</span><span style="color:#111">c</span> <span style="color:#f92672">-</span> <span style="color:#d88200">&#39;a&#39;</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span>
            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">i</span> <span style="color:#f92672">&gt;</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#111">String</span> <span style="color:#111">w1</span> <span style="color:#f92672">=</span> <span style="color:#111">words</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">-</span><span style="color:#111">1</span><span style="color:#f92672">]</span><span style="color:#f92672">,</span> <span style="color:#111">w2</span> <span style="color:#f92672">=</span> <span style="color:#111">words</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
                <span style="color:#00a8c8">int</span> <span style="color:#111">len</span> <span style="color:#f92672">=</span> <span style="color:#111">Math</span><span style="color:#f92672">.</span><span style="color:#75af00">min</span><span style="color:#f92672">(</span><span style="color:#111">w1</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">,</span> <span style="color:#111">w2</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">,</span> <span style="color:#111">j</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span>
                <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#f92672">;</span> <span style="color:#111">j</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">len</span><span style="color:#f92672">;</span> <span style="color:#111">j</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#00a8c8">char</span> <span style="color:#111">c1</span> <span style="color:#f92672">=</span> <span style="color:#111">w1</span><span style="color:#f92672">.</span><span style="color:#75af00">charAt</span><span style="color:#f92672">(</span><span style="color:#111">j</span><span style="color:#f92672">)</span><span style="color:#f92672">,</span> <span style="color:#111">c2</span> <span style="color:#f92672">=</span> <span style="color:#111">w2</span><span style="color:#f92672">.</span><span style="color:#75af00">charAt</span><span style="color:#f92672">(</span><span style="color:#111">j</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                    <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">c1</span> <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#111">c2</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                        <span style="color:#111">adj</span><span style="color:#f92672">[</span><span style="color:#111">c1</span> <span style="color:#f92672">-</span> <span style="color:#d88200">&#39;a&#39;</span><span style="color:#f92672">]</span><span style="color:#f92672">[</span><span style="color:#111">c2</span> <span style="color:#f92672">-</span> <span style="color:#d88200">&#39;a&#39;</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">true</span><span style="color:#f92672">;</span>
                        <span style="color:#00a8c8">break</span><span style="color:#f92672">;</span>
                    <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
                <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">j</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">len</span> <span style="color:#f92672">&amp;</span><span style="color:#f92672">&amp;</span> <span style="color:#111">w1</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">&gt;</span> <span style="color:#111">w2</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span><span style="color:#f92672">;</span> <span style="color:#75715e">// &#34;abcd&#34; -&gt; &#34;ab&#34;
</span><span style="color:#75715e"></span>            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="method-2-bfs">Method 2: BFS</h1>
<p>Build the graph(post-adjacency list and visited list), then use Karn's algorithm to do topological sort (essentially BFS).</p>
<p>Note:</p>
<ol>
<li>visited[]: -1(not exist), 0(no pre-node), 1,2,3&hellip;(pre-nodes number)</li>
</ol>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#00a8c8">public</span> <span style="color:#111">String</span> <span style="color:#75af00">alienOrder</span><span style="color:#f92672">(</span><span style="color:#111">String</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">words</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">Set</span><span style="color:#f92672">&lt;</span><span style="color:#111">Integer</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#111">adj</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">ArrayList</span><span style="color:#f92672">&lt;</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">26</span><span style="color:#f92672">;</span> <span style="color:#111">i</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#111">adj</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#00a8c8">new</span> <span style="color:#111">HashSet</span><span style="color:#f92672">&lt;</span><span style="color:#111">Integer</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#f92672">]</span> <span style="color:#111">degree</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#00a8c8">int</span><span style="color:#f92672">[</span><span style="color:#111">26</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
        <span style="color:#111">Arrays</span><span style="color:#f92672">.</span><span style="color:#75af00">fill</span><span style="color:#f92672">(</span><span style="color:#111">degree</span><span style="color:#f92672">,</span> <span style="color:#f92672">-</span><span style="color:#111">1</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">// init the adj and degree list
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">words</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">;</span> <span style="color:#111">i</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">char</span> <span style="color:#111">c</span> <span style="color:#f92672">:</span> <span style="color:#111">words</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">]</span><span style="color:#f92672">.</span><span style="color:#75af00">toCharArray</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">degree</span><span style="color:#f92672">[</span><span style="color:#111">c</span><span style="color:#f92672">-</span><span style="color:#d88200">&#39;a&#39;</span><span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#111">degree</span><span style="color:#f92672">[</span><span style="color:#111">c</span><span style="color:#f92672">-</span><span style="color:#d88200">&#39;a&#39;</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">i</span> <span style="color:#f92672">&gt;</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#111">String</span> <span style="color:#111">w1</span> <span style="color:#f92672">=</span> <span style="color:#111">words</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">-</span><span style="color:#111">1</span><span style="color:#f92672">]</span><span style="color:#f92672">,</span> <span style="color:#111">w2</span> <span style="color:#f92672">=</span> <span style="color:#111">words</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">]</span><span style="color:#f92672">;</span>
                <span style="color:#00a8c8">int</span> <span style="color:#111">len</span> <span style="color:#f92672">=</span> <span style="color:#111">Math</span><span style="color:#f92672">.</span><span style="color:#75af00">min</span><span style="color:#f92672">(</span><span style="color:#111">w1</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">,</span> <span style="color:#111">w2</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">j</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">j</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">len</span><span style="color:#f92672">;</span> <span style="color:#111">j</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#00a8c8">int</span> <span style="color:#111">c1</span> <span style="color:#f92672">=</span> <span style="color:#111">w1</span><span style="color:#f92672">.</span><span style="color:#75af00">charAt</span><span style="color:#f92672">(</span><span style="color:#111">j</span><span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#d88200">&#39;a&#39;</span><span style="color:#f92672">,</span> <span style="color:#111">c2</span> <span style="color:#f92672">=</span> <span style="color:#111">w2</span><span style="color:#f92672">.</span><span style="color:#75af00">charAt</span><span style="color:#f92672">(</span><span style="color:#111">j</span><span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#d88200">&#39;a&#39;</span><span style="color:#f92672">;</span>
                    <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">c1</span> <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#111">c2</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                        <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#f92672">!</span><span style="color:#111">adj</span><span style="color:#f92672">.</span><span style="color:#75af00">get</span><span style="color:#f92672">(</span><span style="color:#111">c1</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">contains</span><span style="color:#f92672">(</span><span style="color:#111">c2</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                            <span style="color:#111">adj</span><span style="color:#f92672">.</span><span style="color:#75af00">get</span><span style="color:#f92672">(</span><span style="color:#111">c1</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#75af00">add</span><span style="color:#f92672">(</span><span style="color:#111">c2</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                            <span style="color:#111">degree</span><span style="color:#f92672">[</span><span style="color:#111">c2</span><span style="color:#f92672">]</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                        <span style="color:#00a8c8">break</span><span style="color:#f92672">;</span>
                    <span style="color:#f92672">}</span>
                    <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">j</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">len</span><span style="color:#f92672">-</span><span style="color:#111">1</span> <span style="color:#f92672">&amp;</span><span style="color:#f92672">&amp;</span> <span style="color:#111">w1</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">&gt;</span> <span style="color:#111">w2</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">return</span> <span style="color:#d88200">&#34;&#34;</span><span style="color:#f92672">;</span> <span style="color:#75715e">// &#34;abcd&#34; -&gt; &#34;ab&#34;   
</span><span style="color:#75715e"></span>                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// topological sort
</span><span style="color:#75715e"></span>        <span style="color:#111">Deque</span><span style="color:#f92672">&lt;</span><span style="color:#111">Integer</span><span style="color:#f92672">&gt;</span> <span style="color:#111">q</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">ArrayDeque</span><span style="color:#f92672">&lt;</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">degree</span><span style="color:#f92672">.</span><span style="color:#75af00">length</span><span style="color:#f92672">;</span> <span style="color:#111">i</span><span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">degree</span><span style="color:#f92672">[</span><span style="color:#111">i</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#111">q</span><span style="color:#f92672">.</span><span style="color:#75af00">offer</span><span style="color:#f92672">(</span><span style="color:#111">i</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#111">StringBuilder</span> <span style="color:#111">sb</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">StringBuilder</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#00a8c8">while</span> <span style="color:#f92672">(</span><span style="color:#f92672">!</span><span style="color:#111">q</span><span style="color:#f92672">.</span><span style="color:#75af00">isEmpty</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#111">q</span><span style="color:#f92672">.</span><span style="color:#75af00">poll</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#111">sb</span><span style="color:#f92672">.</span><span style="color:#75af00">append</span><span style="color:#f92672">(</span><span style="color:#f92672">(</span><span style="color:#00a8c8">char</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span><span style="color:#d88200">&#39;a&#39;</span> <span style="color:#f92672">+</span> <span style="color:#111">i</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">j</span> <span style="color:#f92672">:</span> <span style="color:#111">adj</span><span style="color:#f92672">.</span><span style="color:#75af00">get</span><span style="color:#f92672">(</span><span style="color:#111">i</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#111">degree</span><span style="color:#f92672">[</span><span style="color:#111">j</span><span style="color:#f92672">]</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">;</span>
                <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">degree</span><span style="color:#f92672">[</span><span style="color:#111">j</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#111">q</span><span style="color:#f92672">.</span><span style="color:#75af00">offer</span><span style="color:#f92672">(</span><span style="color:#111">j</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#00a8c8">for</span> <span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">d</span> <span style="color:#f92672">:</span> <span style="color:#111">degree</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">if</span> <span style="color:#f92672">(</span><span style="color:#111">d</span> <span style="color:#f92672">&gt;</span> <span style="color:#111">0</span><span style="color:#f92672">)</span> <span style="color:#00a8c8">return</span> <span style="color:#d88200">&#34;&#34;</span><span style="color:#f92672">;</span> <span style="color:#75715e">// has loop
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">return</span> <span style="color:#111">sb</span><span style="color:#f92672">.</span><span style="color:#75af00">toString</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
</code></pre></td></tr></table>
</div>
</div></div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2020 Zhili.</div>
  </div>
</footer>
</body>
</html>
