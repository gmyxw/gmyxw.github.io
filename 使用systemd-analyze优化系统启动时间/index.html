<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="åšå®¢, æŠ€æœ¯, ç”Ÿç‰©ä¿¡æ¯ï¼Œç²¾å‡†åŒ»ç–—, é—ä¼ å’¨è¯¢, é«˜é€šé‡æŠ€æœ¯, ç®—æ³•, å­¦ä¹ , ä½œå“, å†™ä½œ, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>ä½¿ç”¨systemd-analyzeä¼˜åŒ–ç³»ç»Ÿå¯åŠ¨æ—¶é—´ - zhili</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <a href="https://sy123.netlify.app/">zhili</a> â¯
      <a href="/%e4%bd%bf%e7%94%a8systemd-analyze%e4%bc%98%e5%8c%96%e7%b3%bb%e7%bb%9f%e5%90%af%e5%8a%a8%e6%97%b6%e9%97%b4">ä½¿ç”¨systemd analyzeä¼˜åŒ–ç³»ç»Ÿå¯åŠ¨æ—¶é—´</a>/</h1>
  </div>
  <nav><a href="/file/">Files</a><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>ä½¿ç”¨systemd-analyzeä¼˜åŒ–ç³»ç»Ÿå¯åŠ¨æ—¶é—´</h1>
  </div>
<div class="meta">
  <div>ğŸ•“2020-02-16 14:53</div>
  <div>
    <span><a href="https://sy123.netlify.app/tags/linux/">#linux</a></span>
      </div>
  </div>
<div class="content">
  <h3 id="systemd-analyzeç®€ä»‹">systemd-analyzeç®€ä»‹</h3>
<p>systemd-analyzeæ˜¯Linuxè‡ªå¸¦çš„åˆ†æç³»ç»Ÿå¯åŠ¨æ€§èƒ½çš„å·¥å…·ã€‚</p>
<p>systemd-analyzeå¯ä½¿ç”¨çš„å‘½ä»¤ï¼š</p>
<ul>
<li>
<p>systemd-analyze [OPTIONSâ€¦] [time]</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] blame</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] critical-chain [UNITâ€¦]</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] plot [&gt; file.svg]</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] dot [PATTERNâ€¦] [&gt; file.dot]</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] dump</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] set-log-level LEVEL</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] set-log-target TARGET</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] get-log-level</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] get-log-target</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] syscall-filter [SETâ€¦]</p>
</li>
<li>
<p>systemd-analyze [OPTIONSâ€¦] verify [FILESâ€¦]</p>
</li>
<li>
<p>systemd-analyzeå‘½ä»¤å…·ä½“å«ä¹‰ï¼š</p>
</li>
<li>
<p>systemd-analyze å¯ä»¥æ˜¾ç¤ºç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ä¸­çš„æ€§èƒ½ç»Ÿè®¡æ•°æ®ã€ è·å– systemd ç³»ç»Ÿç®¡ç†å™¨çš„çŠ¶æ€ä¸è·Ÿè¸ªä¿¡æ¯ã€ æ ¡éªŒå•å…ƒæ–‡ä»¶çš„æ­£ç¡®æ€§ã€‚</p>
</li>
<li>
<p>systemd-analyze time å¯ä»¥æ˜¾ç¤ºå¦‚ä¸‹æ—¶é—´ï¼š (1)åœ¨å¯åŠ¨ç¬¬ä¸€ä¸ªç”¨æˆ·æ€è¿›ç¨‹(init)ä¹‹å‰ï¼Œå†…æ ¸è¿è¡Œäº†å¤šé•¿æ—¶é—´ï¼› (2)åœ¨åˆ‡æ¢è¿›å…¥å®é™…çš„æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹å‰ï¼Œinitrd(initial RAM disk)è¿è¡Œäº†å¤šé•¿æ—¶é—´ï¼› (3)è¿›å…¥å®é™…çš„æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹åï¼Œç”¨æˆ·ç©ºé—´å¯åŠ¨å®ŒæˆèŠ±äº†å¤šé•¿æ—¶é—´ã€‚ æ³¨æ„ï¼Œä¸Šè¿°æ—¶é—´åªæ˜¯ç®€å•çš„è®¡ç®—äº†ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ä¸­åˆ°è¾¾ä¸åŒæ ‡è®°ç‚¹çš„æ—¶é—´ï¼Œ å¹¶æ²¡æœ‰è®¡å…¥å„å•å…ƒå®é™…å¯åŠ¨å®Œæˆæ‰€èŠ±è´¹çš„æ—¶é—´ä»¥åŠç£ç›˜ç©ºé—²çš„æ—¶é—´ã€‚</p>
</li>
<li>
<p>systemd-analyze blame æŒ‰ç…§æ¯ä¸ªå•å…ƒèŠ±è´¹çš„å¯åŠ¨æ—¶é—´ä»å¤šåˆ°å°‘çš„é¡ºåºï¼Œåˆ—å‡ºæ‰€æœ‰å½“å‰æ­£å¤„äºæ´»åŠ¨(active)çŠ¶æ€çš„å•å…ƒã€‚ è¿™äº›ä¿¡æ¯æœ‰åŠ©äºç”¨æˆ·ä¼˜åŒ–ç³»ç»Ÿå¯åŠ¨é€Ÿåº¦ã€‚ ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›ä¿¡æ¯ä¹Ÿå¯èƒ½å…·æœ‰è¯¯å¯¼æ€§ï¼Œ å› ä¸ºèŠ±è´¹è¾ƒé•¿æ—¶é—´å¯åŠ¨çš„å•å…ƒï¼Œæœ‰å¯èƒ½åªæ˜¯åœ¨ç­‰å¾…å¦ä¸€ä¸ªä¾èµ–å•å…ƒå®Œæˆå¯åŠ¨ã€‚
systemd-analyze critical-chain [UNITâ€¦] ä¸ºæŒ‡å®šçš„å•å…ƒ(çœç•¥å‚æ•°è¡¨ç¤ºé»˜è®¤å¯åŠ¨ç›®æ ‡å•å…ƒ)ä»¥æ ‘çŠ¶å½¢å¼æ˜¾ç¤ºæ—¶é—´å…³é”®é“¾(time-critical chain)ã€‚ â€œ@â€åé¢çš„æ—¶åˆ»è¡¨ç¤ºè¯¥å•å…ƒçš„å¯åŠ¨æ—¶åˆ»ï¼› â€œ+â€åé¢çš„æ—¶é•¿è¡¨ç¤ºè¯¥å•å…ƒæ€»è®¡èŠ±äº†å¤šé•¿æ—¶é—´æ‰å®Œæˆå¯åŠ¨ã€‚ ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ è¿™äº›ä¿¡æ¯ä¹Ÿå¯èƒ½å…·æœ‰è¯¯å¯¼æ€§ï¼Œ å› ä¸ºèŠ±è´¹è¾ƒé•¿æ—¶é—´å¯åŠ¨çš„å•å…ƒï¼Œ æœ‰å¯èƒ½åªæ˜¯åœ¨ç­‰å¾…å¦ä¸€ä¸ªä¾èµ–å•å…ƒå®Œæˆå¯åŠ¨ã€‚</p>
</li>
<li>
<p>systemd-analyze plot è¾“å‡ºä¸€ä¸ª SVG å›¾åƒï¼Œè¯¦ç»†æ˜¾ç¤ºæ¯ä¸ªå•å…ƒçš„å¯åŠ¨æ—¶åˆ»ï¼Œ å¹¶é«˜äº®æ˜¾ç¤ºæ¯ä¸ªå•å…ƒæ€»è®¡èŠ±äº†å¤šé•¿æ—¶é—´æ‰å®Œæˆå¯åŠ¨ã€‚
systemd-analyze dot æŒ‰ç…§ GraphViz dot(1) æ ¼å¼è¾“å‡ºå•å…ƒé—´çš„ä¾èµ–å…³ç³»å›¾ã€‚ åœ¨å®è·µä¸­ï¼Œé€šå¸¸ä½¿ç”¨ systemd-analyze dot | dot -Tsvg &gt; systemd.svg å‘½ä»¤æ¥æœ€ç»ˆç”Ÿæˆæè¿°å•å…ƒé—´ä¾èµ–å…³ç³»çš„ SVG å›¾åƒã€‚ é™¤éä½¿ç”¨äº† â€“order æˆ– â€“require é€‰é¡¹é™å®šä»…æ˜¾ç¤ºç‰¹å®šç±»å‹çš„ä¾èµ–å…³ç³»ï¼Œ å¦åˆ™å°†ä¼šæ˜¾ç¤ºæ‰€æœ‰çš„ä¾èµ–å…³ç³»ã€‚å¦‚æœæŒ‡å®šäº†è‡³å°‘ä¸€ä¸ª PATTERN å‚æ•°(ä¾‹å¦‚ *.target è¿™æ ·çš„ shell åŒ¹é…æ¨¡å¼)ï¼Œ é‚£ä¹ˆå°†ä¼šä»…æ˜¾ç¤ºæ‰€æœ‰åŒ¹é…è¿™äº›æ¨¡å¼çš„å•å…ƒçš„ç›´æ¥ä¾èµ–å…³ç³»ã€‚</p>
</li>
<li>
<p>systemd-analyze dump æŒ‰ç…§äººç±»æ˜“è¯»çš„æ ¼å¼è¾“å‡ºå…¨éƒ¨å•å…ƒçš„çŠ¶æ€(ä¸€èˆ¬éƒ½æœ‰å‡ åƒæ•°ä¸‡è¡Œ)ã€‚ å› ä¸ºå®ƒçš„è¾“å‡ºæ ¼å¼ç»å¸¸åœ¨æœªé€šçŸ¥çš„æƒ…å†µä¸‹å‘ç”Ÿå˜åŒ–ï¼Œ æ‰€ä»¥åˆ‡å‹¿å°†æ­¤è¾“å‡ºç”¨äºç¨‹åºåˆ†æã€‚</p>
</li>
<li>
<p>systemd-analyze set-log-level LEVEL å°† systemd å®ˆæŠ¤è¿›ç¨‹çš„æ—¥å¿—ç­‰çº§æ›´æ”¹ä¸º LEVEL (å¯ä½¿ç”¨çš„å€¼å‚è§ systemd(1) çš„ â€“log-level= é€‰é¡¹)</p>
</li>
<li>
<p>systemd-analyze set-log-target TARGET å°† systemd å®ˆæŠ¤è¿›ç¨‹çš„æ—¥å¿—ç›®æ ‡æ›´æ”¹ä¸º TARGET (å¯ä½¿ç”¨çš„å€¼å‚è§ systemd(1) çš„ â€“log-target= é€‰é¡¹)</p>
</li>
<li>
<p>systemd-analyze get-log-level æ‰“å°å‡º systemd å®ˆæŠ¤è¿›ç¨‹å½“å‰çš„æ—¥å¿—ç­‰çº§ã€‚</p>
</li>
<li>
<p>systemd-analyze get-log-target æ‰“å°å‡º systemd å®ˆæŠ¤è¿›ç¨‹å½“å‰çš„æ—¥å¿—ç›®æ ‡ã€‚</p>
</li>
<li>
<p>systemd-analyze syscall-filter [SETâ€¦] å¦‚æœæŒ‡å®šäº†è‡³å°‘ä¸€ä¸ª SET å‚æ•°ï¼Œé‚£ä¹ˆä»…æ˜¾ç¤ºæŒ‡å®šçš„é›†åˆæ‰€åŒ…å«çš„ç³»ç»Ÿè°ƒç”¨åˆ—è¡¨ï¼› å¦åˆ™æ˜¾ç¤ºå…¨éƒ¨ç³»ç»Ÿè°ƒç”¨é›†åˆçš„è¯¦æƒ…ã€‚æ³¨æ„ï¼Œå¿…é¡»åœ¨ SET å‚æ•°ä¸­åŒ…å« â€œ@â€ å‰ç¼€ã€‚</p>
</li>
<li>
<p>systemd-analyze verify æ ¡éªŒæŒ‡å®šçš„å•å…ƒæ–‡ä»¶ä»¥åŠè¢«æŒ‡å®šçš„å•å…ƒæ–‡ä»¶å¼•ç”¨çš„å…¶ä»–å•å…ƒæ–‡ä»¶çš„æ­£ç¡®æ€§ï¼Œå¹¶æ˜¾ç¤ºå‘ç°çš„é”™è¯¯ã€‚ FILES å‚æ•°å¯ä»¥æ˜¯å•å…ƒæ–‡ä»¶çš„ç²¾ç¡®è·¯å¾„(å¸¦æœ‰ä¸Šçº§ç›®å½•)ï¼Œä¹Ÿå¯ä»¥ä»…ä»…æ˜¯å•å…ƒæ–‡ä»¶çš„åç§°(æ²¡æœ‰ç›®å½•å‰ç¼€)ã€‚ å¯¹äºé‚£äº›ä»…ç»™å‡ºäº†æ–‡ä»¶å(æ²¡æœ‰ç›®å½•å‰ç¼€)çš„å•å…ƒï¼Œå°†ä¼šä¼˜å…ˆåœ¨å…¶ä»–å·²ç»ç»™å‡ºç²¾ç¡®è·¯å¾„çš„å•å…ƒæ–‡ä»¶çš„æ‰€åœ¨ç›®å½•ä¸­æœç´¢ï¼Œ å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°†ä¼šç»§ç»­åœ¨å¸¸è§„çš„å•å…ƒç›®å½•ä¸­æœç´¢(è¯¦è§unit(5) æ‰‹å†Œ)ã€‚ å¯ä»¥ä½¿ç”¨ $SYSTEMD_UNIT_PATH ç¯å¢ƒå˜é‡æ¥æ›´æ”¹é»˜è®¤çš„å•å…ƒæœç´¢ç›®å½•ã€‚</p>
</li>
<li>
<p>å¦‚æœæ²¡æŒ‡å®šä»»ä½•å‘½ä»¤ï¼Œé‚£ä¹ˆç­‰ä»·äºä½¿ç”¨ systemd-analyze time å‘½ä»¤ã€‚</p>
</li>
</ul>
<h3 id="systemd-analyzeå®æˆ˜">systemd-analyzeå®æˆ˜</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>âœ~ systemd-analyze
</span></span><span style="display:flex;"><span>Startup finished in 3.220s <span style="color:#000;font-weight:bold">(</span>kernel<span style="color:#000;font-weight:bold">)</span> + 23.420s <span style="color:#000;font-weight:bold">(</span>userspace<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">=</span> 26.641s 
</span></span><span style="display:flex;"><span>graphical.target reached after 23.111s in userspace
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°å¼€æœºç”¨äº†23ç§’ä»¥ä¸Šã€‚æ¥ä¸‹æ¥æŸ¥è¯¢ä¸‹è¿™é”…åº”è¯¥è°èƒŒï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>âœ~ systemd-analyze blame
</span></span><span style="display:flex;"><span>21.594s NetworkManager-wait-online.service
</span></span><span style="display:flex;"><span>680ms systemd-logind.service
</span></span><span style="display:flex;"><span>587ms lvm2-monitor.service
</span></span><span style="display:flex;"><span>570ms lightdm.service
</span></span><span style="display:flex;"><span>534ms dev-sdc2.device
</span></span><span style="display:flex;"><span>371ms upower.service
</span></span><span style="display:flex;"><span>309ms tlp.service
</span></span><span style="display:flex;"><span>292ms systemd-timesyncd.service
</span></span><span style="display:flex;"><span>260ms systemd-udevd.service
</span></span><span style="display:flex;"><span>252ms ModemManager.service
</span></span><span style="display:flex;"><span>217ms systemd-journald.service
</span></span><span style="display:flex;"><span>131ms systemd-journal-flush.service
</span></span><span style="display:flex;"><span>121ms boot-efi.mount
</span></span><span style="display:flex;"><span>117ms avahi-daemon.service
</span></span><span style="display:flex;"><span>115ms bluetooth.service
</span></span><span style="display:flex;"><span>111ms polkit.service
</span></span><span style="display:flex;"><span>111ms NetworkManager.service
</span></span><span style="display:flex;"><span>110ms udisks2.service
</span></span><span style="display:flex;"><span>102ms systemd-modules-load.service
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°<code>NetworkManager-wait-online.service</code>è€—æ—¶ æœ€é•¿ï¼ŒèŠ±äº†21ç§’ã€‚è¿™é‡Œçš„è®°æ—¶æœ‰å¯èƒ½æ˜¯ç­‰å¾…å…¶ä»–æœåŠ¡å™¨å¯åŠ¨çš„ï¼Œå†æ¥çœ‹çœ‹å…¶å…³è”æœåŠ¡çš„å¯åŠ¨æ—¶é—´ï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>âœ ~ systemd-analyze critical-chain NetworkManager-wait-online.service
</span></span><span style="display:flex;"><span>The <span style="color:#0086b3">time</span> when unit became active or started is printed after the <span style="color:#d14">&#34;@&#34;</span> character.
</span></span><span style="display:flex;"><span>The <span style="color:#0086b3">time</span> the unit took to start is printed after the <span style="color:#d14">&#34;+&#34;</span> character.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>NetworkManager-wait-online.service +21.594s
</span></span><span style="display:flex;"><span>â””â”€NetworkManager.service @1.398s +111ms
</span></span><span style="display:flex;"><span>â””â”€dbus.service @1.390s
</span></span><span style="display:flex;"><span>â””â”€basic.target @1.389s
</span></span><span style="display:flex;"><span>â””â”€sockets.target @1.389s
</span></span><span style="display:flex;"><span>â””â”€dbus.socket @1.389s
</span></span><span style="display:flex;"><span>â””â”€sysinit.target @1.384s
</span></span><span style="display:flex;"><span>â””â”€systemd-backlight@backlight:intel_backlight.service @1.313s +71ms
</span></span><span style="display:flex;"><span>â””â”€system-systemd<span style="color:#d14">\x</span>2dbacklight.slice @1.312s
</span></span><span style="display:flex;"><span>â””â”€system.slice @207ms
</span></span><span style="display:flex;"><span>â””â”€-.slice @207ms
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯è¿™ä¸€çœ‹åˆ°è¿™é‡Œå®ƒåœ¨ç­‰å¾…å…¶ä»–çš„æœåŠ¡ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰èŠ±21ç§’æ€ä¹ˆå¤šã€‚</p>
<p>å‘ç°äº†å½±å“å¯åŠ¨çš„æœåŠ¡ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯ç¦ç”¨æ­¤æœåŠ¡ï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>âœ ~ sudo systemctl disable NetworkManager-wait-online.service
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ–¹æ¡ˆäºŒï¼šç¼–è¾‘<code>/lib/systemd/system/NetworkManager-wait-online.service</code>æ–‡ä»¶ï¼Œå°†æ–‡ä»¶ä¸­çš„</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">[</span>Service<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">Type</span><span style="color:#000;font-weight:bold">=</span>oneshot <span style="color:#008080">ExecStart</span><span style="color:#000;font-weight:bold">=</span>/usr/bin/nm-online -s -q --timeout<span style="color:#000;font-weight:bold">=</span><span style="color:#099">30</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¶…æ—¶æ—¶é—´ç”±<code>30</code>æ”¹ä¸º<code>10</code></p>
<p>å¦å¤–ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹è¿˜æœ‰å“ªäº›å¼€æœºå¯åŠ¨çš„æœåŠ¡å¯è¢«ä¼˜åŒ–ï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>âœ ~ systemctl list-unit-files --type<span style="color:#000;font-weight:bold">=</span>service | grep enabled
</span></span><span style="display:flex;"><span>autovt@.service enabled 
</span></span><span style="display:flex;"><span>avahi-daemon.service enabled 
</span></span><span style="display:flex;"><span>bluetooth.service enabled 
</span></span><span style="display:flex;"><span>bumblebeed.service enabled 
</span></span><span style="display:flex;"><span>cronie.service enabled 
</span></span><span style="display:flex;"><span>dbus-org.bluez.service enabled 
</span></span><span style="display:flex;"><span>dbus-org.freedesktop.Avahi.service enabled 
</span></span><span style="display:flex;"><span>dbus-org.freedesktop.ModemManager1.service enabled 
</span></span><span style="display:flex;"><span>dbus-org.freedesktop.NetworkManager.service enabled 
</span></span><span style="display:flex;"><span>dbus-org.freedesktop.nm-dispatcher.service enabled 
</span></span><span style="display:flex;"><span>dbus-org.freedesktop.timesync1.service enabled 
</span></span><span style="display:flex;"><span>display-manager.service enabled 
</span></span><span style="display:flex;"><span>getty@.service enabled 
</span></span><span style="display:flex;"><span>lightdm.service enabled 
</span></span><span style="display:flex;"><span>ModemManager.service enabled 
</span></span><span style="display:flex;"><span>NetworkManager-dispatcher.service enabled 
</span></span><span style="display:flex;"><span>NetworkManager.service enabled 
</span></span><span style="display:flex;"><span>org.cups.cupsd.service enabled 
</span></span><span style="display:flex;"><span>systemd-fsck-root.service enabled-runtime
</span></span><span style="display:flex;"><span>systemd-remount-fs.service enabled-runtime
</span></span><span style="display:flex;"><span>systemd-timesyncd.service enabled 
</span></span><span style="display:flex;"><span>tlp-sleep.service enabled 
</span></span><span style="display:flex;"><span>tlp.service enabled 
</span></span><span style="display:flex;"><span>ufw.service enabled
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç›¸å…³æœåŠ¡å¯¹åº”çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>NetworkManager-wait-online.serviceï¼šç½‘ç»œæœåŠ¡ç®¡ç†å™¨ï¼Œç¦ç”¨åä¸å½±å“æ­£å¸¸çš„ç½‘ç»œä½¿ç”¨</li>
<li>autovt@.serviceï¼šç™»é™†ç›¸å…³ ä¿ç•™</li>
<li>avahi-daemon.serviceï¼šè®©ç¨‹åºè‡ªåŠ¨å‘ç°æœ¬åœ°ç½‘ç»œæœåŠ¡ã€‚é™¤éä½ æœ‰å…¼å®¹çš„è®¾å¤‡æˆ–ä½¿ç”¨ zeroconf åè®®çš„æœåŠ¡ï¼Œå¦åˆ™åº”è¯¥å…³é—­å®ƒã€‚</li>
<li>serviceï¼šè“ç‰™æœåŠ¡ï¼Œå¦‚æœä½¿ç”¨ä¹Ÿå¯ä»¥ç¦ç”¨</li>
<li>serviceï¼šæ˜¾å¡é©±åŠ¨ï¼Œä¿ç•™</li>
<li>serviceï¼šé¢„å®šæ—¥ç¨‹å’Œæ—¶é—´è§¦å‘äº‹ä»¶çš„å®ˆæŠ¤è¿›ç¨‹ã€‚ä¿ç•™</li>
<li>dbus-org.bluez.serviceï¼šè“ç‰™å®ˆæŠ¤è¿›ç¨‹ï¼Œå¯ç¦æ­¢</li>
<li>dbus-org.freedesktop.Avahi.serviceï¼šè®©ç¨‹åºè‡ªåŠ¨å‘ç°æœ¬åœ°ç½‘ç»œæœåŠ¡ã€‚é™¤éä½ æœ‰å…¼å®¹çš„è®¾å¤‡æˆ–ä½¿ç”¨ zeroconf åè®®çš„æœåŠ¡ï¼Œå¦åˆ™åº”è¯¥å…³é—­å®ƒã€‚</li>
<li>dbus-org.freedesktop.ModemManager1.serviceï¼šç”¨äºæä¾›ç§»åŠ¨å®½é¢‘broadbandï¼ˆ2G/3G/4Gï¼‰æ¥å£ã€‚å¯ç¦ç”¨</li>
<li>dbus-org.freedesktop.NetworkManager.serviceï¼šæ¡Œé¢ç½‘å¡ç®¡ç†å¯ç¦ç”¨</li>
<li>dbus-org.freedesktop.nm-dispatcher.serviceï¼šç½‘å¡å®ˆæŠ¤è¿›ç¨‹ï¼Œå¯ç¦ç”¨</li>
<li>dbus-org.freedesktop.timesync1.serviceï¼šæ—¶é—´åŒæ­¥ï¼Œå¯ç¦ç”¨</li>
<li>display-manager.serviceï¼š ç”¨æ¥ç®¡ç†æ˜¾ç¤ºçš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒå†³å®šå¦‚ä½•æ ¹æ®å½“å‰è¿æ¥çš„ç‰©ç†æ˜¾ç¤ºè®¾å¤‡æ§åˆ¶å…¶é€»è¾‘æ˜¾ç¤ºï¼Œä¿ç•™</li>
<li>getty@.service enabledï¼šttyæ§åˆ¶å°ç›¸å…³ï¼Œä¿ç•™</li>
<li>service enabledï¼šå›¾å½¢åŒ–ç•Œé¢æ˜¾ç¤ºï¼Œä¿ç•™</li>
<li>serviceï¼š è¢« dbus æ¿€æ´»çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œç”¨äºæä¾›ç§»åŠ¨å®½é¢‘broadbandï¼ˆ2G/3G/4Gï¼‰æ¥å£ã€‚å¯ç¦ç”¨</li>
<li>NetworkManager-dispatcher.serviceï¼šç½‘å¡å®ˆæŠ¤è¿›ç¨‹ï¼Œå¯ç¦ç”¨</li>
<li>serviceï¼šæ£€æµ‹ç½‘ç»œã€è‡ªåŠ¨è¿æ¥ç½‘ç»œçš„ç¨‹åºã€‚å»ºè®®ä¿ç•™</li>
<li>cups.cupsd.serviceï¼šé€šç”¨UNIXæ‰“å°ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹.ï¼Œå¯ç¦ç”¨</li>
<li>systemd-fsck-root.serviceï¼šè´Ÿè´£å¯¹æ ¹æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ£€æŸ¥ï¼Œå»ºè®®ä¿ç•™</li>
<li>systemd-remount-fs.serviceï¼šåœ¨ç³»ç»Ÿå¯åŠ¨æ—©æœŸå¯åŠ¨çš„æœåŠ¡ï¼Œå®ƒä¼šæ ¹æ® fstab(5) ä¸­è®¾ç½®çš„æŒ‚è½½é€‰é¡¹ï¼Œé‡æ–°æŒ‚è½½æ ¹ç›®å½•ä¸ /usr ç›®å½•ï¼Œ ä»¥åŠè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚è¿™æ˜¯ä¸€ä¸ªå¿…éœ€çš„åŠ¨ä½œï¼Œ å› ä¸ºè¿™äº›æ–‡ä»¶ç³»ç»Ÿåœ¨èƒ½å¤Ÿè¯»å– /etc/fstab æ–‡ä»¶ä¹‹å‰ï¼Œå°±å·²ç»è¢«é¢„å…ˆæŒ‚è½½äº†ï¼Œ ä¾‹å¦‚åœ¨åˆå§‹å†…å­˜ç›˜(initial RAM disk)ä¸­æŒ‚è½½ã€æˆ–åœ¨è¿›å…¥å®¹å™¨ç¯å¢ƒå‰æŒ‚è½½ã€‚ä¿ç•™</li>
<li>systemd-timesyncd.serviceï¼šè·¨ç½‘ç»œåŒæ­¥ç³»ç»Ÿæ—¶é’Ÿçš„å®ˆæŠ¤æœåŠ¡ï¼Œå¯ç¦ç”¨</li>
<li>tlp-sleep.serviceï¼šç”µæ± ä¼˜åŒ–ï¼Œç”µæºç®¡ç†ï¼Œå»ºè®®ä¿ç•™</li>
<li>serviceï¼šç”µæ± ä¼˜åŒ–ï¼Œç”µæºç®¡ç†ï¼Œå»ºè®®ä¿ç•™</li>
<li>serviceï¼š é˜²ç«å¢™æœåŠ¡ï¼Œå»ºè®®ä¿ç•™</li>
</ul>
</div>
<div class="disqus">
  <div id="disqus_thread"></div>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css">
<script src="https://cdn.jsdelivr.net/gh/sy123s/blog@master/js/disqus.js"></script>
<script>
var dsqjs = new DisqusJS({
    shortname: 'sy123-ml',
    siteName: 'zhili',
    identifier: '',
    url: '',
    title: '',
    api: 'https://disqus.gd2.workers.dev/api/',
    apikey: 'gZw0N3utfdxezjRheJwLz3xkiUcRWno3ruWSIROPHRcYNGmwBosRpnyb8MmiknVg',
    admin: 'disqus_wvCW9l8bmG',
    adminLabel: 'zhili'
});
</script>
                            
</div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2022 zhili.</div>
  </div>
</footer>
</body>
</html>
