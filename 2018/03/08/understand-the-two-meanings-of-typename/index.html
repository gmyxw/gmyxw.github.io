<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="博客, 技术, 生物信息，精准医疗, 遗传咨询, 高通量技术, 算法, 学习, 作品, 写作, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>Item-42 Understand the two meanings of typename - sy123.ml</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <h1><a href="https://sy123.ml/">sy123.ml</a></h1><h2><a href="https://sy123.ml/">winter is coming.</a></h2>
  </div>
  <nav><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>Item-42 Understand the two meanings of typename</h1>
  </div>
<div class="meta">
  <div>2018-03-08 19:19</div>
  <div>
    <span><a href="https://sy123.ml/tags/technique/">#technique</a></span>
      <span><a href="https://sy123.ml/tags/cpp/">#cpp</a></span>
      </div>
  </div>
<div class="content">
  <p>When declaring template parameters, both <code>class</code> and <code>typename</code> are interchangeable. When identifying nested dependent type names, use <code>typename</code>, except in base class lists or as a base class identifier in a member initialization list.</p>
<!-- toc -->
<h1 id="in-template-parameter-declaration">In template parameter declaration</h1>
<p>In the template declarations such as below:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">template</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">class</span> <span style="color:#75af00">T</span><span style="color:#f92672">&gt;</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">Widget</span><span style="color:#111">;</span>  <span style="color:#75715e">// uses &#34;class&#34;
</span><span style="color:#75715e"></span><span style="color:#00a8c8">template</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">typename</span> <span style="color:#111">T</span><span style="color:#f92672">&gt;</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">Widget</span><span style="color:#111">;</span>  <span style="color:#75715e">// uses &#34;typename&#34;
</span></code></pre></td></tr></table>
</div>
</div><p>There's no difference between these two declarations, though using <code>typename</code> may be helpful to imply that the parameter need not be a class type. From C++'s point of view, <code>class</code> and <code>typename</code> means exactly the same in this case.</p>
<h1 id="nested-dependent-type">Nested dependent type</h1>
<p>Names in a template that are dependent on a template parameter are called <code>dependent names</code>. When a dependent name is nested inside a class, we can call it a <em>nested dependent name</em>. For example, considering following code, which actually won't compile due to the lack of <code>typename</code>:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">template</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">typename</span> <span style="color:#111">C</span><span style="color:#f92672">&gt;</span>  <span style="color:#75715e">// print 2nd element in container
</span><span style="color:#75715e"></span><span style="color:#00a8c8">void</span> <span style="color:#111">print2nd</span><span style="color:#111">(</span><span style="color:#00a8c8">const</span> <span style="color:#111">C</span><span style="color:#f92672">&amp;</span> <span style="color:#111">container</span><span style="color:#111">)</span>
<span style="color:#111">{</span>
    <span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#111">container</span><span style="color:#111">.</span><span style="color:#111">size</span><span style="color:#111">(</span><span style="color:#111">)</span> <span style="color:#f92672">&gt;</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#111">)</span><span style="color:#111">{</span>
        <span style="color:#111">C</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">const_iterator</span> <span style="color:#111">iter</span><span style="color:#111">(</span><span style="color:#111">container</span><span style="color:#111">.</span><span style="color:#111">begin</span><span style="color:#111">(</span><span style="color:#111">)</span><span style="color:#111">)</span><span style="color:#111">;</span> <span style="color:#75715e">// get iterator to 1st element
</span><span style="color:#75715e"></span>        <span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#111">iter</span><span style="color:#111">;</span>  <span style="color:#75715e">// move iter to 2nd element
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">int</span> <span style="color:#111">value</span> <span style="color:#f92672">=</span> <span style="color:#f92672">*</span><span style="color:#111">iter</span><span style="color:#111">;</span>  <span style="color:#75715e">// copy the 2nd element to an int
</span><span style="color:#75715e"></span>        <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">cout</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> <span style="color:#111">value</span><span style="color:#111">;</span>  <span style="color:#75715e">// print the int
</span><span style="color:#75715e"></span>    <span style="color:#111">}</span>
<span style="color:#111">}</span>
</code></pre></td></tr></table>
</div>
</div><p>In this example, <code>C::const_iterator</code> is not only a dependent name on the template parameter <code>C</code>, but also a nested dependent name, or more specifically, a <em>nested dependent type name</em> (a nested dependent name that refers to a type). As a comparason, local variable <code>value</code> is of type int, independent of any template parameter, which is known as <code>non-dependent name</code>.</p>
<p>The reason why the code above doesn't compile is that, without <code>typename</code>, it is difficult to parse those nested dependent names. For example, if we make following declaration:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">template</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">typename</span> <span style="color:#111">C</span><span style="color:#f92672">&gt;</span>
<span style="color:#00a8c8">void</span> <span style="color:#111">print2nd</span><span style="color:#111">(</span><span style="color:#00a8c8">const</span> <span style="color:#111">C</span><span style="color:#f92672">&amp;</span> <span style="color:#111">container</span><span style="color:#111">)</span>
<span style="color:#111">{</span>
    <span style="color:#111">C</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">const_iterator</span> <span style="color:#f92672">*</span> <span style="color:#111">x</span><span style="color:#111">;</span>
    <span style="color:#111">.</span><span style="color:#111">.</span><span style="color:#111">.</span>
<span style="color:#111">}</span>
</code></pre></td></tr></table>
</div>
</div><p>There are multiple possible ways to interprete this statement:</p>
<ol>
<li>We assume <code>C::const_iterator</code> is a type, thus we're declaring <code>x</code> as a local variable that's a pointer to a <code>C::const_iterator</code></li>
<li>We assume <code>C</code> has a static member that happens to be named <code>const_iterator</code>, and <code>x</code> happens to be the name of a global variable, so this statement is a multiplication of <code>C::const_iterator</code> by <code>x</code></li>
</ol>
<p>To resolve this ambiguity, C++ rules that the parser should not assume a nested dependent name in a template as a <em>type</em>, unless we explicitly specify it through <code>typename</code> keyword. Thus, the valid code for the above example should be like this:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">template</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">typename</span> <span style="color:#111">C</span><span style="color:#f92672">&gt;</span>  <span style="color:#75715e">// print 2nd element in container
</span><span style="color:#75715e"></span><span style="color:#00a8c8">void</span> <span style="color:#111">print2nd</span><span style="color:#111">(</span><span style="color:#00a8c8">const</span> <span style="color:#111">C</span><span style="color:#f92672">&amp;</span> <span style="color:#111">container</span><span style="color:#111">)</span>
<span style="color:#111">{</span>
    <span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#111">container</span><span style="color:#111">.</span><span style="color:#111">size</span><span style="color:#111">(</span><span style="color:#111">)</span> <span style="color:#f92672">&gt;</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#111">)</span><span style="color:#111">{</span>
        <span style="color:#00a8c8">typename</span> <span style="color:#111">C</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">const_iterator</span> <span style="color:#111">iter</span><span style="color:#111">(</span><span style="color:#111">container</span><span style="color:#111">.</span><span style="color:#111">begin</span><span style="color:#111">(</span><span style="color:#111">)</span><span style="color:#111">)</span><span style="color:#111">;</span> <span style="color:#75715e">// get iterator to 1st element
</span><span style="color:#75715e"></span>        <span style="color:#111">.</span><span style="color:#111">.</span><span style="color:#111">.</span>
    <span style="color:#111">}</span>
<span style="color:#111">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="real-world-usecase">Real world usecase</h2>
<p>In real code, it's representative that sometimes <code>typename</code> shows with another keyword <code>typedef</code> to save some typing time:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">template</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">typename</span> <span style="color:#111">IterT</span><span style="color:#f92672">&gt;</span>
<span style="color:#00a8c8">void</span> <span style="color:#111">workWithIterator</span><span style="color:#111">(</span><span style="color:#111">IterT</span> <span style="color:#111">iter</span><span style="color:#111">)</span>
<span style="color:#111">{</span>
    <span style="color:#00a8c8">typedef</span> <span style="color:#00a8c8">typename</span> <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">iterator_traits</span><span style="color:#f92672">&lt;</span><span style="color:#111">IterT</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">value_type</span> <span style="color:#111">value_type</span><span style="color:#111">;</span>
    <span style="color:#111">value_type</span> <span style="color:#75af00">temp</span><span style="color:#111">(</span><span style="color:#f92672">*</span><span style="color:#111">iter</span><span style="color:#111">)</span><span style="color:#111">;</span>
<span style="color:#111">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Basically, this statement is to declare a local variable <code>temp</code> of the same type as what <code>IterT</code> objects point to, and it initializes <code>temp</code> with the object that <code>iter</code> points to. Here, the standard traits class (item 47) is to represent the type of thing pointed to by objects of type <code>IterT</code>. For example, if <code>IterT</code> is <code>list&lt;string&gt;::iterator</code>, then <code>temp</code> is of type <code>string</code>. Since <code>value_type</code> is nested inside <code>iterator_traits&lt;IterT&gt;</code>, and <code>IterT</code> is a template parameter, we must precede it by <code>typename</code>.</p>
<p>It is also worth noting that <code>typename</code> should be used to identify only nested dependent type names; other names shouldn't have it:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">template</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">typename</span> <span style="color:#111">C</span><span style="color:#f92672">&gt;</span>                  <span style="color:#75715e">// typename allowed (class also allowed): template parameter declaration
</span><span style="color:#75715e"></span><span style="color:#00a8c8">void</span> <span style="color:#111">f</span><span style="color:#111">(</span><span style="color:#00a8c8">const</span> <span style="color:#111">C</span><span style="color:#f92672">&amp;</span> <span style="color:#111">container</span><span style="color:#111">,</span>            <span style="color:#75715e">// typename not allowed: C is not a nested dependent type name
</span><span style="color:#75715e"></span>       <span style="color:#00a8c8">typename</span> <span style="color:#111">C</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">iterator</span> <span style="color:#111">iter</span><span style="color:#111">)</span><span style="color:#111">;</span>    <span style="color:#75715e">// typename required: iter is a nested dependent type name
</span></code></pre></td></tr></table>
</div>
</div><p>In summary, the general rule is: anytime we refer to a nested dependent type name in a template, we must immediately precede it by the word <code>typename</code>, except for the following two cases:</p>
<h2 id="exception">Exception</h2>
<p>There are two exception cases where <code>typename</code> must not precede nested dependent type names:</p>
<ol>
<li>in a list of base classes</li>
<li>as a base class idenfifier in a member initialization list</li>
</ol>
<p>For example:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">template</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">typename</span> <span style="color:#111">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#00a8c8">class</span> <span style="color:#75af00">Derived</span><span style="color:#f92672">:</span> <span style="color:#00a8c8">public</span> <span style="color:#111">Base</span><span style="color:#f92672">&lt;</span><span style="color:#111">T</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">Nested</span><span style="color:#111">{</span>  <span style="color:#75715e">// case 1 - base class list: typename not allowd
</span><span style="color:#75715e"></span><span style="color:#00a8c8">public</span><span style="color:#f92672">:</span>
    <span style="color:#00a8c8">explicit</span> <span style="color:#111">Derived</span><span style="color:#111">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">x</span><span style="color:#111">)</span>            
    <span style="color:#f92672">:</span> <span style="color:#111">Base</span><span style="color:#f92672">&lt;</span><span style="color:#111">T</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">Nested</span><span style="color:#111">(</span><span style="color:#111">x</span><span style="color:#111">)</span>    <span style="color:#75715e">// case 2 - base class identifier in mem init. list: typename not allowd
</span><span style="color:#75715e"></span>    <span style="color:#111">{</span>
        <span style="color:#00a8c8">typename</span> <span style="color:#111">Base</span><span style="color:#f92672">&lt;</span><span style="color:#111">T</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">Nested</span> <span style="color:#111">temp</span><span style="color:#111">;</span> <span style="color:#75715e">// typename required: nested dependent type not in the two exception cases
</span><span style="color:#75715e"></span>        <span style="color:#111">.</span><span style="color:#111">.</span><span style="color:#111">.</span>
    <span style="color:#111">}</span>
    <span style="color:#111">.</span><span style="color:#111">.</span><span style="color:#111">.</span>
<span style="color:#111">}</span><span style="color:#111">;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>P.S.: Actually, enforcement of the rules surrounding <code>typename</code> vary from compiler to compiler. Some compilers accept code where <code>typename</code> is required but missing; some accept code where <code>typename</code> is present but not allowd. This means the interaction of <code>typename</code> and nested dependent type names can lead to some portability headaches.</p>
</blockquote></div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2020 Zhili.</div>
  </div>
</footer>
</body>
</html>
