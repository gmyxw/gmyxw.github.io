<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="博客, 技术, 生物信息，精准医疗, 遗传咨询, 高通量技术, 算法, 学习, 作品, 写作, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>[MECpp]Item-15 Understand the Costs of Exception Handling - sy123.ml</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <h1><a href="https://sy123.ml/">sy123.ml</a></h1><h2><a href="https://sy123.ml/">winter is coming.</a></h2>
  </div>
  <nav><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>[MECpp]Item-15 Understand the Costs of Exception Handling</h1>
  </div>
<div class="meta">
  <div>2018-04-09 18:10</div>
  <div>
    <span><a href="https://sy123.ml/tags/technique/">#technique</a></span>
      <span><a href="https://sy123.ml/tags/cpp/">#cpp</a></span>
      </div>
  </div>
<div class="content">
  <p>Exception handling has costs, and we pay at least some of them even if we never use the keywords <code>try</code>, <code>throw</code>, or <code>catch</code>.</p>
<ul>
<li>
<p>If we never use any exception-handling features:</p>
<ul>
<li>we pay for the space used by the data structures needed to keep track of which objects are fully constructed (MECpp item 10)</li>
<li>we pay for the time needed to keep these data structures up to date</li>
<li>Programs compiled with support for exceptions are typically slower and larger than their counterparts compiled without support for exceptions</li>
</ul>
</li>
<li>
<p>If we include <code>try-catch</code> blocks:</p>
<ul>
<li>the cost varies from compiler to compiler.</li>
<li>roughly, the overall code size increases by 5-10%, assuming no exceptions are thrown</li>
<li>roughly, the overall runtime goes up by 5-10%, assuming no exceptions are thrown</li>
</ul>
</li>
<li>
<p>If we include exception specifications:</p>
<ul>
<li>they generally incurs about the same cost as a <code>try</code> block</li>
</ul>
</li>
<li>
<p>The cost of throwing an exception:</p>
<ul>
<li>Compared to a normal function return, returning from a function by throwing an exception may be as much as <em>three orders of magnitude</em> slower</li>
</ul>
</li>
</ul>
<h3 id="solution">Solution</h3>
<p>To minimize the exception-related costs,</p>
<ul>
<li>compile without support for exceptions when that is feasible;</li>
<li>limit the use of <code>try</code> blocks, and exception specifications to locations where we really need them;</li>
<li>throw exceptions only under conditions that are truly exceptional;</li>
<li>profile the software (MECpp item 16) to determine if exception support is the bottleneck
<ul>
<li>If it is, consider switching to different compilers, ones that provide more efficient implementations of C++'s exception-handling features.</li>
</ul>
</li>
</ul></div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2020 Zhili.</div>
  </div>
</footer>
</body>
</html>
