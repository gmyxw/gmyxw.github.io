<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="博客, 技术, 生物信息，精准医疗, 遗传咨询, 高通量技术, 算法, 学习, 作品, 写作, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>[EMCpp]Item-10 Prefer Scoped enums to Unscopded enums - sy123.ml</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <h1><a href="https://sy123.ml/">sy123.ml</a></h1><h2><a href="https://sy123.ml/">winter is coming.</a></h2>
  </div>
  <nav><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>[EMCpp]Item-10 Prefer Scoped enums to Unscopded enums</h1>
  </div>
<div class="meta">
  <div>2018-07-14 13:33</div>
  <div>
    <span><a href="https://sy123.ml/tags/technique/">#technique</a></span>
      <span><a href="https://sy123.ml/tags/cpp/">#cpp</a></span>
      </div>
  </div>
<div class="content">
  <p>Enumerators of scoped <code>enum</code>s are visible only within the <code>enum</code>, convert to other types only with a cast, and always support forward-declared because their default underlying type is <code>int</code>.</p>
<!-- toc -->
<h1 id="scope">Scope</h1>
<p>Generally speaking, declaring a name inside curly braces limits the visibility of that name to the scope defined by the braces, with one exception: the C++98-style <code>enum</code>s, which lead to enumerator names leaking into the scope containing their <code>enum</code> definition, and thus have an official term - <em>unscoped</em> <code>enum</code>s.</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">enum</span> <span style="color:#75af00">Color</span> <span style="color:#111">{</span> <span style="color:#111">black</span><span style="color:#111">,</span> <span style="color:#111">white</span><span style="color:#111">,</span> <span style="color:#111">red</span> <span style="color:#111">}</span><span style="color:#111">;</span> <span style="color:#75715e">// black, white, red are in same scope as Color
</span><span style="color:#75715e"></span><span style="color:#00a8c8">auto</span> <span style="color:#111">white</span> <span style="color:#f92672">=</span> <span style="color:#111">false</span><span style="color:#111">;</span> <span style="color:#75715e">// error! white already declared in this scope
</span></code></pre></td></tr></table>
</div>
</div><p>As their new C++11 counterparts, by adding a <code>class</code> in declaration, <em>scoped</em> <code>enum</code>s don't leak names:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">enum</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">Color</span> <span style="color:#111">{</span> <span style="color:#111">black</span><span style="color:#111">,</span> <span style="color:#111">white</span><span style="color:#111">,</span> <span style="color:#111">red</span> <span style="color:#111">}</span><span style="color:#111">;</span>
<span style="color:#00a8c8">auto</span> <span style="color:#111">white</span> <span style="color:#f92672">=</span> <span style="color:#111">false</span><span style="color:#111">;</span> <span style="color:#75715e">// fine. no other &#34;whate&#34; in scope
</span><span style="color:#75715e"></span><span style="color:#111">Color</span> <span style="color:#111">c</span> <span style="color:#f92672">=</span> <span style="color:#111">white</span><span style="color:#111">;</span> <span style="color:#75715e">// error
</span><span style="color:#75715e"></span><span style="color:#00a8c8">auto</span> <span style="color:#111">c</span> <span style="color:#f92672">=</span> <span style="color:#111">Color</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">white</span><span style="color:#111">;</span> <span style="color:#75715e">// fine, type of c is Color
</span></code></pre></td></tr></table>
</div>
</div><h1 id="implicit-conversion">Implicit conversion</h1>
<p>The fact that scoped <code>enum</code>s have strong typed enumerators results in their inability to implicitly convert to integral types (and, from there, to floating-point types), which behavior is otherwise permited in terms of unscoped <code>enum</code>s:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#111">Color</span> <span style="color:#111">c</span> <span style="color:#f92672">=</span> <span style="color:#111">Color</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">red</span><span style="color:#111">;</span>
<span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">vector</span><span style="color:#f92672">&lt;</span><span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">size_t</span><span style="color:#f92672">&gt;</span> <span style="color:#111">primeFactors</span><span style="color:#111">(</span><span style="color:#111">std</span><span style="color:#111">:</span><span style="color:#111">size_t</span> <span style="color:#111">x</span><span style="color:#111">)</span><span style="color:#111">;</span> <span style="color:#75715e">// func. returning prime factors of x
</span><span style="color:#75715e"></span><span style="color:#111">.</span><span style="color:#111">.</span><span style="color:#111">.</span>
<span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#111">c</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">14.5</span><span style="color:#111">)</span> <span style="color:#111">{</span>  <span style="color:#75715e">// error! can&#39;t compare Color and double
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">auto</span> <span style="color:#111">factors</span> <span style="color:#f92672">=</span> <span style="color:#111">primeFactors</span><span style="color:#111">(</span><span style="color:#111">c</span><span style="color:#111">)</span><span style="color:#111">;</span>  <span style="color:#75715e">// error! can&#39;t pass Color to function expecting std::size_t
</span><span style="color:#75715e"></span><span style="color:#111">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Instead, in order to convert typefrom <code>Color</code> to a different type, we need a cast:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#00a8c8">static_cast</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">double</span><span style="color:#f92672">&gt;</span><span style="color:#111">(</span><span style="color:#111">c</span><span style="color:#111">)</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">14.5</span> <span style="color:#111">)</span> <span style="color:#111">{</span>  <span style="color:#75715e">// odd code, but valid
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">auto</span> <span style="color:#111">factors</span> <span style="color:#f92672">=</span> <span style="color:#111">primeFactors</span><span style="color:#111">(</span><span style="color:#00a8c8">static_cast</span><span style="color:#f92672">&lt;</span><span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">size_t</span><span style="color:#f92672">&gt;</span><span style="color:#111">(</span><span style="color:#111">c</span><span style="color:#111">)</span><span style="color:#111">)</span><span style="color:#111">;</span>
<span style="color:#111">}</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="forward-declaration">Forward declaration</h1>
<p>Technically speaking, both scoped and unscoped <code>enum</code>s may be forward-declared, except that unscoped ones need a bit of additional work - by specifying the underlying type for unscoped <code>enum</code>s<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">enum</span> <span style="color:#75af00">Status</span><span style="color:#f92672">:</span> <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">unit8_t</span><span style="color:#111">;</span>  <span style="color:#75715e">// fwd decl for unscoped enum;
</span></code></pre></td></tr></table>
</div>
</div><p>Since scoped <code>enum</code>s have a default underlying type of <code>int</code>, forward declaration is always supported:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">enum</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">Status</span><span style="color:#111">;</span> <span style="color:#75715e">// forward declaration
</span><span style="color:#75715e"></span><span style="color:#00a8c8">void</span> <span style="color:#75af00">continueProcessing</span><span style="color:#111">(</span><span style="color:#111">Status</span> <span style="color:#111">s</span><span style="color:#111">)</span><span style="color:#111">;</span> <span style="color:#75715e">// use of fwd-declared enum
</span></code></pre></td></tr></table>
</div>
</div><p>With the help of forward declaration, the header containing the declarations requires no recompilation if <code>Status</code>'s definition is revised. Furthermore, it is also possible that <code>continueProcessing</code>'s implementation need not be recompiled<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>.</p>
<h1 id="twist">Twist</h1>
<p>There's still some situation where unscoped <code>enum</code>s may be useful: when referring to fields within C++11's <code>std::tuple</code>s. Suppose we have a tuple holding values for the name, email address, and reputation value for a user at a social networking website:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">using</span> <span style="color:#111">UserInfo</span> <span style="color:#f92672">=</span>            <span style="color:#75715e">// type alias
</span><span style="color:#75715e"></span>    <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">tuple</span><span style="color:#f92672">&lt;</span><span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">string</span>  <span style="color:#75715e">// name
</span><span style="color:#75715e"></span>               <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">string</span>  <span style="color:#75715e">// email
</span><span style="color:#75715e"></span>               <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">size_t</span><span style="color:#f92672">&gt;</span> <span style="color:#75715e">// reputation
</span></code></pre></td></tr></table>
</div>
</div><p>To get field value, using an unscoped <code>enum</code> to associate names with field numbers may be helpful:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">enum</span> <span style="color:#75af00">UserInfoFields</span> <span style="color:#111">{</span> <span style="color:#111">uiName</span><span style="color:#111">,</span> <span style="color:#111">uiEmail</span><span style="color:#111">,</span> <span style="color:#111">uiReputation</span> <span style="color:#111">}</span><span style="color:#111">;</span>
<span style="color:#111">UserInfo</span> <span style="color:#111">uInfo</span><span style="color:#111">;</span>
<span style="color:#111">.</span><span style="color:#111">.</span><span style="color:#111">.</span>
<span style="color:#00a8c8">auto</span> <span style="color:#111">val</span> <span style="color:#f92672">=</span> <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">get</span><span style="color:#f92672">&lt;</span><span style="color:#111">uiEmail</span><span style="color:#f92672">&gt;</span><span style="color:#111">(</span><span style="color:#111">uInfo</span><span style="color:#111">)</span><span style="color:#111">;</span> <span style="color:#75715e">// implicit conversion from UserInfoFields to std::size_t
</span></code></pre></td></tr></table>
</div>
</div><p>To mimic the similar behavior, using scoped <code>enum</code>s is more verbose:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">enum</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">UserInfoFields</span> <span style="color:#111">{</span> <span style="color:#111">uiName</span><span style="color:#111">,</span> <span style="color:#111">uiEmail</span><span style="color:#111">,</span> <span style="color:#111">uiReputation</span> <span style="color:#111">}</span><span style="color:#111">;</span>
<span style="color:#111">.</span><span style="color:#111">.</span><span style="color:#111">.</span>
<span style="color:#00a8c8">auto</span> <span style="color:#111">val</span> <span style="color:#f92672">=</span> <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">get</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">static_cast</span><span style="color:#f92672">&lt;</span><span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">size_t</span><span style="color:#f92672">&gt;</span><span style="color:#111">(</span><span style="color:#111">UserInfoFields</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">uiEmail</span><span style="color:#111">)</span><span style="color:#f92672">&gt;</span><span style="color:#111">(</span><span style="color:#111">uInfo</span><span style="color:#111">)</span><span style="color:#111">;</span>
</code></pre></td></tr></table>
</div>
</div><p>To save some typing, we might consider define a helper function, or in a more generalized form, a function template <code>toUType</code> that takes an arbitrary enumerator and return its value as a compile-time constant:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">template</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">typename</span> <span style="color:#111">E</span><span style="color:#f92672">&gt;</span>
<span style="color:#00a8c8">constexpr</span> <span style="color:#00a8c8">typename</span> <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">underlying_type</span><span style="color:#f92672">&lt;</span><span style="color:#111">E</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#00a8c8">typename</span> <span style="color:#75715e">// see item 9 for info on type traits
</span><span style="color:#75715e"></span>    <span style="color:#111">toUType</span><span style="color:#111">(</span><span style="color:#111">E</span> <span style="color:#111">enumerator</span><span style="color:#111">)</span> <span style="color:#00a8c8">noexcept</span>
<span style="color:#111">{</span>
    <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">static_cast</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">typename</span> <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">underlying_type</span><span style="color:#f92672">&lt;</span><span style="color:#111">E</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">type</span><span style="color:#f92672">&gt;</span><span style="color:#111">(</span><span style="color:#111">enumerator</span><span style="color:#111">)</span><span style="color:#111">;</span>
<span style="color:#111">}</span>
</code></pre></td></tr></table>
</div>
</div><p>In C++14, we may simplify the <code>toUType</code> to a sleeker form:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">template</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">typename</span> <span style="color:#111">E</span><span style="color:#f92672">&gt;</span>
<span style="color:#00a8c8">constexpr</span> <span style="color:#00a8c8">auto</span> <span style="color:#111">toUType</span><span style="color:#111">(</span><span style="color:#111">E</span> <span style="color:#111">enumerator</span><span style="color:#111">)</span> <span style="color:#00a8c8">noexcept</span>
<span style="color:#111">{</span>
    <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">static_cast</span><span style="color:#f92672">&lt;</span><span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">underlying_type_t</span><span style="color:#f92672">&lt;</span><span style="color:#111">E</span><span style="color:#f92672">&gt;</span><span style="color:#f92672">&gt;</span><span style="color:#111">(</span><span style="color:#111">enumerator</span><span style="color:#111">)</span><span style="color:#111">;</span>
<span style="color:#111">}</span>
</code></pre></td></tr></table>
</div>
</div><p>And then we access a field of the tuple like this:</p>
<div class="highlight"><div style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00a8c8">auto</span> <span style="color:#111">val</span> <span style="color:#f92672">=</span> <span style="color:#111">std</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">get</span><span style="color:#f92672">&lt;</span><span style="color:#111">toUType</span><span style="color:#111">(</span><span style="color:#f92672">&lt;</span><span style="color:#111">UserInfoFields</span><span style="color:#f92672">:</span><span style="color:#f92672">:</span><span style="color:#111">uiEmail</span><span style="color:#111">)</span><span style="color:#f92672">&gt;</span><span style="color:#111">(</span><span style="color:#111">uInfo</span><span style="color:#111">)</span><span style="color:#111">;</span>
</code></pre></td></tr></table>
</div>
</div><p>Still more to write than use of the unscoped <code>enum</code>, but it also avoids namespace pollution and inadvertent conversions involving enumerators, so those extra characters might still be a reasonable to pay for.</p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Since there is no default underlying type for unscoped <code>enum</code>s, to make it possible for compilers to select an underlying type for each <code>enum</code> prior to the <code>enum</code> being used, C++98 supports only <code>enum</code> definitions (when all enumerators are listed), while <code>enum</code> declarations are not allowed. <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>This happens if <code>Status</code> is modified (e.g., add a new enumerator), but <code>continueProcessing</code>'s behavior is unaffected (e.g., the function doesn't use the newly added enumerator). <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section></div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2020 Zhili.</div>
  </div>
</footer>
</body>
</html>
