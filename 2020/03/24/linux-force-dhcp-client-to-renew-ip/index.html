<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="博客, 技术, 生物信息，精准医疗, 遗传咨询, 高通量技术, 算法, 学习, 作品, 写作, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>Linux Force DHCP Client to Renew IP - zhili</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <h1><a href="https://sy123.ml/">zhili</a></h1>
  </div>
  <nav><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>Linux Force DHCP Client to Renew IP</h1>
  </div>
<div class="meta">
  <div>2020-03-24 07:43</div>
  <div>
    <span><a href="https://sy123.ml/tags/linux/">#linux</a></span>
      </div>
  </div>
<div class="content">
  <blockquote>
<p>am using Ubuntu Linux. How to force Linux to reacquire a new IP address from the DHCP server? What is the command of Linux equivalent to Windows’s “ipconfig /renew” command?</p>
</blockquote>
<p>You need to use Dynamic Host Configuration Protocol Client i.e., <strong>dhclient</strong> command. The client normally doesn’t release the current lease as it is not required by the DHCP protocol. Some cable ISPs require their clients to notify the server if they wish to release an assigned IP address. The <strong>dhclient</strong> command, provides a means for configuring one or more network interfaces using the Dynamic Host Configuration Protocol, BOOTP protocol, or if these protocols fail, by statically assigning an address.
Advertisements</p>
<h1 id="linux-renew-ip-command-using-dhcp">Linux renew ip command using dhcp</h1>
<p>The -r flag explicitly releases the current lease, and once the lease has been released, the client exits. For example, open terminal application and type the command:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sudo dhclient -r
</code></pre></td></tr></table>
</div>
</div><p>Now obtain fresh IP address using DHCP on Linux:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sudo dhclient
</code></pre></td></tr></table>
</div>
</div><h1 id="how-can-i-renew-or-release-an-ip-in-linux-for-eth0">How can I renew or release an IP in Linux for eth0?</h1>
<p>To renew or release an IP address for the eth0 interface, enter:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sudo dhclient -r eth0
$ sudo dhclient eth0
</code></pre></td></tr></table>
</div>
</div><p>In this example, I am renewing an IP address for my wireless interface:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo dhclient -v -r eth0
sudo dhclient -v eth0
Sample outputs:
</code></pre></td></tr></table>
</div>
</div><p>The -v option shows information on screen about dhcp server and obtained lease.</p>
<h1 id="other-options-in-linux-to-renew-dhcp">Other options in Linux to renew dhcp</h1>
<p>There is no need to restart network service. Above command should work with any Linux distro such as RHEL, Fedora, CentOS, Ubuntu and others. On a related note you can also try out the following commands:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#998;font-style:italic"># ifdown eth0</span>
<span style="color:#998;font-style:italic"># ifup eth0</span>
<span style="color:#998;font-style:italic">### RHEL/CentOS/Fedora specific command ###</span>
<span style="color:#998;font-style:italic"># /etc/init.d/network restart</span>

OR
<span style="color:#998;font-style:italic">### Debian / Ubuntu Linux specific command ###</span>
<span style="color:#998;font-style:italic"># /etc/init.d/networking restart</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="nmcli-command-networkmanager-to-renew-ip-address-in-linux">nmcli command (NetworkManager) to renew IP address in Linux</h1>
<p>The NetworkManager daemon attempts to make networking configuration and operation as painless and automatic as possible by managing the primary network connection and other network interfaces, like Ethernet, WiFi, and Mobile Broadband devices command-line tool for controlling NetworkManager. The nmcli is a command-line tool for controlling NetworkManager and getting its status. To renew IP address using nmcli for connection named ‘nixcraft_5G’ (use ‘nmcli con‘ command to get list of all connections):</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">nmcli con
nmcli con down id <span style="color:#d14">&#39;nixcraft_5G&#39;</span>
nmcli con up id <span style="color:#d14">&#39;nixcraft_5G&#39;</span>
Sample outputs:
</code></pre></td></tr></table>
</div>
</div><h1 id="linux-force-dhclient-to-renew-ip-address-on-a-centos-7ubuntudebian-and-other-linux-based-server">Linux Force dhclient to renew IP address on a CentOS 7/Ubuntu/Debian and other Linux-based server</h1>
<p>Most modern Linux-based system uses the systemd as a init system and here is how to force Linux to renew IP address using DHCP. Use the ip command to find out the current IP address:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">ip a
ip a s eth0
</code></pre></td></tr></table>
</div>
</div><p>Run:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">dhclient-v -r eth0
</code></pre></td></tr></table>
</div>
</div><p>OR use the systemctl command to restart network service on a CentOS 7:
systemctl restart network.service
systemctl status network.service</p>
<p>Linux Force DHCP Client to renew IP address</p>
<h1 id="conclusion-linux-force-dhcp-client-to-release-and-renew-an-ip-address">Conclusion: Linux force DHCP client to release and renew an IP address</h1>
<table>
<thead>
<tr>
<th>Command</th>
<th>Command to release/renew a DHCP IP address in Linux</th>
</tr>
</thead>
<tbody>
<tr>
<td>ip a</td>
<td>Get ip address and interface information on Linux</td>
</tr>
<tr>
<td>ip a s eth0</td>
<td>Find the current ip address for the eth0 interface in Linux</td>
</tr>
<tr>
<td>dhclient -v -r eth0</td>
<td>Force Linux to renew IP address using a DHCP for eth0 interface</td>
</tr>
<tr>
<td>systemctl restart network.service</td>
<td>Restart networking service and obtain a new IP address via DHCP on Ubuntu/Debian Linux</td>
</tr>
<tr>
<td>systemctl restart networking.service</td>
<td>Restart networking service and obtain a new IP address via DHCP on a CentOS/RHEL/Fedora Linux</td>
</tr>
<tr>
<td>systemctl restart systemd-networkd</td>
<td>Restart networking service and obtain a new IP address via DHCP on a Arch Linux</td>
</tr>
<tr>
<td>nmcli con</td>
<td>Use NetworkManager to obtain info about Linux IP address and interfaces</td>
</tr>
<tr>
<td>nmcli con down id &lsquo;enp6s0&rsquo;</td>
<td>Take down Linux interface enp6s0 and release IP address in Linux</td>
</tr>
<tr>
<td>nmcli con up id &lsquo;enp6s0&rsquo;</td>
<td>Obtian a new IP address for Linux interface enp6s0 and release IP address using DHCP</td>
</tr>
<tr>
<td>dhcpcd</td>
<td>在 SuSE distribution 里面，他仅有 dhcpcd 这支程序，他与 dhclient 是相同的命令。</td>
</tr>
<tr>
<td>ifconfig enp3s0 10.6.6.6</td>
<td>set static IP</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Man pages: <a href="www.google.com">dhclient(8)</a></p>
</blockquote>
</div>
<div class="disqus">
  <div id="disqus_thread"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css">
<script src="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqus.js"></script>
<script>
var dsqjs = new DisqusJS({
    shortname: 'sy123-ml',
    siteName: 'zhili',
    identifier: '',
    url: '',
    title: '',
    api: '',
    apikey: 'gZw0N3utfdxezjRheJwLz3xkiUcRWno3ruWSIROPHRcYNGmwBosRpnyb8MmiknVg',
    admin: 'disqus_wvCW9l8bmG',
    adminLabel: 'zhili'
});
</script>
                            
</div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2020 zhili.</div>
  </div>
</footer>
</body>
</html>
