<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="博客, 技术, 生物信息，精准医疗, 遗传咨询, 高通量技术, 算法, 学习, 作品, 写作, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>React关于form的取部分字段数据 - zhili</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <h1><a href="https://sy123.netlify.app/">zhili</a></h1>
  </div>
  <nav><a href="/file/">Files</a><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>React关于form的取部分字段数据</h1>
  </div>
<div class="meta">
  <div>2020-02-27 14:19</div>
  <div>
    <span><a href="https://sy123.netlify.app/tags/js/">#js</a></span>
      <span><a href="https://sy123.netlify.app/tags/react/">#react</a></span>
      </div>
  </div>
<div class="content">
  <h2 id="获取查询条件的值-validatefields">获取查询条件的值 validateFields</h2>
<p><code>form.validateFields</code> / <code>validateFieldsAndScroll</code>
校验并获取一组输入域的值与 <code>Error</code>，若 <code>fieldNames</code> 参数为空，则校验全部组件</p>
<h2 id="获取表单的所有数据">获取表单的所有数据</h2>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
<span style="color:#000;font-weight:bold">this</span>.props.form.validateFieldsAndScroll((err, values) =&gt; {

  <span style="color:#000;font-weight:bold">if</span>(err){
    <span style="color:#000;font-weight:bold">return</span>;
  }
   console.log(<span style="color:#d14">&#39;_values&#39;</span>, values);
});

</code></pre></td></tr></table>
</div>
</div><h2 id="获取表单的部分字段数据">获取表单的部分字段数据</h2>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
<span style="color:#000;font-weight:bold">this</span>.props.form.validateFieldsAndScroll([<span style="color:#d14">`timeUnit</span><span style="color:#d14">${</span>num<span style="color:#d14">}</span><span style="color:#d14">`</span>, <span style="color:#d14">`Time</span><span style="color:#d14">${</span>num<span style="color:#d14">}</span><span style="color:#d14">`</span>,<span style="color:#d14">`deviceTypeId</span><span style="color:#d14">${</span>num<span style="color:#d14">}</span><span style="color:#d14">`</span>], (err, values) =&gt; {
  <span style="color:#000;font-weight:bold">if</span>(err){
    <span style="color:#000;font-weight:bold">return</span>;
  }
   console.log(<span style="color:#d14">&#39;_values&#39;</span>, values);
  <span style="color:#000;font-weight:bold">let</span> t1,t2;
  <span style="color:#000;font-weight:bold">if</span>(values[<span style="color:#d14">`Time</span><span style="color:#d14">${</span>num<span style="color:#d14">}</span><span style="color:#d14">`</span>] <span style="color:#000;font-weight:bold">===</span> <span style="color:#000;font-weight:bold">undefined</span>){
      t1<span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">undefined</span>;
      t2<span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">undefined</span>;
  }<span style="color:#000;font-weight:bold">else</span>{
      t1<span style="color:#000;font-weight:bold">=</span> values[<span style="color:#d14">`Time</span><span style="color:#d14">${</span>num<span style="color:#d14">}</span><span style="color:#d14">`</span>][<span style="color:#099">0</span>].unix()<span style="color:#000;font-weight:bold">*</span><span style="color:#099">1000</span>;
      t2<span style="color:#000;font-weight:bold">=</span> values[<span style="color:#d14">`Time</span><span style="color:#d14">${</span>num<span style="color:#d14">}</span><span style="color:#d14">`</span>][<span style="color:#099">1</span>].unix()<span style="color:#000;font-weight:bold">*</span><span style="color:#099">1000</span>;
  }

  <span style="color:#000;font-weight:bold">const</span> <span style="color:#099">_</span>q <span style="color:#000;font-weight:bold">=</span>{
      startTime<span style="color:#000;font-weight:bold">:</span> t1,
        endTime<span style="color:#000;font-weight:bold">:</span> t2,
        timeUnit<span style="color:#000;font-weight:bold">:</span> values[<span style="color:#d14">`timeUnit</span><span style="color:#d14">${</span>num<span style="color:#d14">}</span><span style="color:#d14">`</span>],
        deviceSN<span style="color:#000;font-weight:bold">:</span>  <span style="color:#d14">&#34;&#34;</span>  ,  <span style="color:#998;font-style:italic">//设备编号
</span><span style="color:#998;font-style:italic"></span>        modulleNo<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#34;&#34;</span>,    <span style="color:#998;font-style:italic">//(POCT BOX模块名称)
</span><span style="color:#998;font-style:italic"></span>        projectNo<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#34;&#34;</span>,    <span style="color:#998;font-style:italic">//项目名称
</span><span style="color:#998;font-style:italic"></span>        type<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#34;&#34;</span>,          <span style="color:#998;font-style:italic">//模块类型、error、open/close、
</span><span style="color:#998;font-style:italic"></span>        subType<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#34;&#34;</span>,      <span style="color:#998;font-style:italic">//(预留字段) 
</span><span style="color:#998;font-style:italic"></span>  }
});

</code></pre></td></tr></table>
</div>
</div></div>
<div class="disqus">
  <div id="disqus_thread"></div>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css">
<script src="https://cdn.jsdelivr.net/gh/sy123s/blog@master/js/disqus.js"></script>
<script>
var dsqjs = new DisqusJS({
    shortname: 'sy123-ml',
    siteName: 'zhili',
    identifier: '',
    url: '',
    title: '',
    api: 'https://disqus.gd2.workers.dev/api/',
    apikey: 'gZw0N3utfdxezjRheJwLz3xkiUcRWno3ruWSIROPHRcYNGmwBosRpnyb8MmiknVg',
    admin: 'disqus_wvCW9l8bmG',
    adminLabel: 'zhili'
});
</script>
                            
</div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2020 zhili.</div>
  </div>
</footer>
</body>
</html>
