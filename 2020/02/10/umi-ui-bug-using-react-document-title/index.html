<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="博客, 技术, 生物信息，精准医疗, 遗传咨询, 高通量技术, 算法, 学习, 作品, 写作, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>umi-ui bug using react-document-title - zhili</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <h1><a href="https://sy123.ml/">zhili</a></h1>
  </div>
  <nav><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>umi-ui bug using react-document-title</h1>
  </div>
<div class="meta">
  <div>2020-02-10 15:41</div>
  <div>
    <span><a href="https://sy123.ml/tags/umi/">#umi</a></span>
      <span><a href="https://sy123.ml/tags/react/">#react</a></span>
      <span><a href="https://sy123.ml/tags/js/">#js</a></span>
      </div>
  </div>
<div class="content">
  <h2 id="背景">背景</h2>
<p>React 项目使用umi时发报：</p>
<blockquote>
<p>Uncaught Invariant Violation: React.Children.only expected to receive a single React element child.
The above error occurred in the <DocumentTitle> component
ui socket init CloseEvent {type: &ldquo;close&rdquo;, bubbles: false, cancelable: false, timeStamp: 1571127775342, wasClean: false, …}</p>
</blockquote>
<h2 id="异常代码">异常代码</h2>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#000;font-weight:bold">&lt;</span>DocumentTitle title<span style="color:#000;font-weight:bold">=</span>{<span style="color:#000;font-weight:bold">this</span>.renderPageTitle()}<span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span>ContainerQuery query<span style="color:#000;font-weight:bold">=</span>{query}<span style="color:#000;font-weight:bold">&gt;</span>
    {(params<span style="color:#000;font-weight:bold">:</span> any) =&gt; <span style="color:#000;font-weight:bold">&lt;</span>div className<span style="color:#000;font-weight:bold">=</span>{classNames(params)}<span style="color:#000;font-weight:bold">&gt;</span>{layout}<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#a61717;background-color:#e3d2d2">/div&gt;}</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#a61717;background-color:#e3d2d2">/ContainerQuery&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#a61717;background-color:#e3d2d2">/DocumentTitle&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><code>DocumentTitle</code>组件内部最外层只能接受一个元素，而代码中有多个元素，所以报错。</p>
<h2 id="解决方案">解决方案</h2>
<p>用<code>&lt;div&gt;&lt;/div&gt;</code>或者<code>&lt;&gt;&lt;/&gt;</code>在外部包裹后就OK，不再报错，页面可正常显示。</p>
</div>
<div class="disqus">
  <div id="disqus_thread"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css">
<script src="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqus.js"></script>
<script>
var dsqjs = new DisqusJS({
    shortname: 'sy123-ml',
    siteName: 'zhili',
    identifier: '',
    url: '',
    title: '',
    api: '',
    apikey: 'gZw0N3utfdxezjRheJwLz3xkiUcRWno3ruWSIROPHRcYNGmwBosRpnyb8MmiknVg',
    admin: 'disqus_wvCW9l8bmG',
    adminLabel: 'zhili'
});
</script>
                            
</div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2020 zhili.</div>
  </div>
</footer>
</body>
</html>
