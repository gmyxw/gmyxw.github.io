<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="博客, 技术, 生物信息，精准医疗, 遗传咨询, 高通量技术, 算法, 学习, 作品, 写作, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>Archlinux Failed to Commit Transaction Conflicting File - zhili</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <h1><a href="https://sy123.ml/">zhili</a></h1>
  </div>
  <nav><a href="/file/">Files</a><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>Archlinux Failed to Commit Transaction Conflicting File</h1>
  </div>
<div class="meta">
  <div>2020-11-25 19:05</div>
  <div>
    <span><a href="https://sy123.ml/tags/linux/">#linux</a></span>
      <span><a href="https://sy123.ml/tags/archlinux/">#archlinux</a></span>
      </div>
  </div>
<div class="content">
  <h2 id="前言">前言</h2>
<p>今天我试着更新我的 Arch Linux 系统，然后遇到一个错误 <code>error：failed to commit transaction (conflicting files) stfl：/usr/lib/libstfl.so.0 exists in filesystem</code>。看起来是 <code>pacman</code> 无法更新一个已经存在于文件系统上的库 (<strong>/usr/lib/libstfl.so.0</strong>)。如果你也遇到了同样的问题，下面是一个快速解决方案。</p>
<h2 id="解决">解决</h2>
<p>用自带的命令覆盖，wiki上是推荐这种做法</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo pacman -Syu --overwrite /usr/lib/libstfl.so.0
</code></pre></td></tr></table>
</div>
</div><p>暴力解决，直接解决出问题的文件，或者你也可以把重复的包备份一下防止意外，不过一般没啥意外，按照经验出这个问题的方式千奇百怪，反正就是更新出错了，比如你更新的时候换源之类的操作也会导致这样，直接删掉就完事</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo rm /usr/lib/libstfl.so.0
</code></pre></td></tr></table>
</div>
</div><p>最后更新就完事</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo pacman -Syu
</code></pre></td></tr></table>
</div>
</div><p>我选择第三种方法，直接删除该文件然后升级 Arch Linux 系统。很有效！</p>
<p>我用linux一直秉承着能偷懒就偷懒的原则，已经折腾不动了，鬼知道我年轻的时候到底经历了什么。</p>
<p>希望本文对你有所帮助。还有更多好东西。敬请期待！</p>
<h2 id="see-aslo">See aslo</h2>
<p><a href="https://wiki.archlinux.org/index.php/pacman#%22Failed_to_commit_transaction_(conflicting_files)%22_error">https://wiki.archlinux.org/index.php/pacman#%22Failed_to_commit_transaction_(conflicting_files)%22_error</a></p>
</div>
<div class="disqus">
  <div id="disqus_thread"></div>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css">
<script src="https://cdn.jsdelivr.net/gh/sy123s/blog@master/js/disqus.js"></script>
<script>
var dsqjs = new DisqusJS({
    shortname: 'sy123-ml',
    siteName: 'zhili',
    identifier: '',
    url: '',
    title: '',
    api: 'https://disqus.gd2.workers.dev/api/',
    apikey: 'gZw0N3utfdxezjRheJwLz3xkiUcRWno3ruWSIROPHRcYNGmwBosRpnyb8MmiknVg',
    admin: 'disqus_wvCW9l8bmG',
    adminLabel: 'zhili'
});
</script>
                            
</div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2020 zhili.</div>
  </div>
</footer>
</body>
</html>
