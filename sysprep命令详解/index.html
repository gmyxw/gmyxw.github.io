<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="åšå®¢, æŠ€æœ¯, ç”Ÿç‰©ä¿¡æ¯ï¼Œç²¾å‡†åŒ»ç–—, é—ä¼ å’¨è¯¢, é«˜é€šé‡æŠ€æœ¯, ç®—æ³•, å­¦ä¹ , ä½œå“, å†™ä½œ, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>Sysprepå‘½ä»¤è¯¦è§£ - zhili</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <a href="https://sy123.netlify.app/">zhili</a> â¯
      <a href="/sysprep%e5%91%bd%e4%bb%a4%e8%af%a6%e8%a7%a3">Sysprepå‘½ä»¤è¯¦è§£</a>/</h1>
  </div>
  <nav><a href="/file/">Files</a><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>Sysprepå‘½ä»¤è¯¦è§£</h1>
  </div>
<div class="meta">
  <div>ğŸ•“2020-01-20 06:12</div>
  <div>
    <span><a href="https://sy123.netlify.app/tags/windows/">#windows</a></span>
      <span><a href="https://sy123.netlify.app/tags/sysprep/">#sysprep</a></span>
      </div>
  </div>
<div class="content">
  <p>å¦‚æœä½ æ‰“ç®—åˆ›å»ºå®‰è£…æ˜ åƒä»¥éƒ¨ç½²åˆ°ä¸åŒçš„è®¡ç®—æœºä¸Šï¼Œåˆ™å¿…é¡»è¿è¡Œå¸¦æœ‰ <code>/generalize</code> é€‰é¡¹çš„ <code>Sysprep</code> å‘½ä»¤ï¼Œå³ä½¿å…¶ä»–è®¡ç®—æœºå…·æœ‰ç›¸åŒçš„ç¡¬ä»¶é…ç½®ã€‚<code>Sysprep /generalize</code> å‘½ä»¤ä» Windows å®‰è£…åˆ é™¤å”¯ä¸€æ€§ä¿¡æ¯ï¼Œè¿™ä½¿å¾—ä½ å¯ä»¥åœ¨ä¸åŒçš„è®¡ç®—æœºä¸Šé‡å¤ä½¿ç”¨æ˜ åƒã€‚ä¸‹æ¬¡å¯åŠ¨ Windows æ˜ åƒæ—¶ï¼Œå°†è¿è¡Œ specialize é…ç½®é˜¶æ®µã€‚</p>
<p>Sysprep å‘½ä»¤è¡Œé€‰é¡¹
ä¸‹åˆ—å‘½ä»¤è¡Œé€‰é¡¹å¯ç”¨äº Sysprepï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ps" data-lang="ps"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">Sysprep.exe</span> [<span style="color:#008080">/oobe</span> <span style="color:#900;font-weight:bold">|</span> <span style="color:#008080">/audit</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#008080">/generalize</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#008080">/mode:vm</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#008080">/reboot</span> <span style="color:#900;font-weight:bold">|</span> <span style="color:#008080">/shutdown</span> <span style="color:#900;font-weight:bold">|</span> <span style="color:#008080">/quit</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#008080">/quiet</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#008080">/unattend:</span>&lt;<span style="color:#900;font-weight:bold">answerfile</span>&gt;]
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸‹è¡¨åˆ—å‡ºäº† Sysprep å‘½ä»¤è¡Œé€‰é¡¹ï¼š</p>
<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>/audit</td>
<td>é‡æ–°å¯åŠ¨è®¡ç®—æœºè¿›å…¥å®¡æ ¸æ¨¡å¼ã€‚å®¡æ ¸æ¨¡å¼ä½¿ä½ å¯ä»¥å°†å…¶ä»–é©±åŠ¨ç¨‹åºæˆ–åº”ç”¨ç¨‹åºæ·»åŠ åˆ° Windowsã€‚ä½ è¿˜å¯ä»¥åœ¨å°† Windows å®‰è£…å‘é€ç»™æœ€ç»ˆç”¨æˆ·å‰å¯¹å…¶è¿›è¡Œæµ‹è¯•ã€‚ä¾‹å¦‚ï¼š</td>
</tr>
<tr>
<td>Sysprep /audit</td>
<td>å¦‚æœæŒ‡å®šäº†åº”ç­”æ–‡ä»¶ï¼Œåˆ™ Windows å®‰è£…ç¨‹åºçš„å®¡æ ¸æ¨¡å¼å°†è¿è¡Œ auditSystem å’Œ auditUser é…ç½®é˜¶æ®µã€‚</td>
</tr>
<tr>
<td>/generalize</td>
<td>å‡†å¤‡è¦ä½œä¸ºæ˜ åƒçš„ Windows å®‰è£…ã€‚Sysprep å·¥å…·ä¼šä» Windows å®‰è£…ä¸­åˆ é™¤æ‰€æœ‰å”¯ä¸€çš„ç³»ç»Ÿä¿¡æ¯ã€‚Sysprep å°†é‡ç½®å®‰å…¨ ID (SID)ï¼Œæ¸…é™¤æ‰€æœ‰ç³»ç»Ÿè¿˜åŸç‚¹ï¼Œå¹¶åˆ é™¤äº‹ä»¶æ—¥å¿—ã€‚ä¾‹å¦‚ï¼š</td>
</tr>
<tr>
<td>Sysprep /generalize /shutdown</td>
<td>ä¸‹æ¬¡è®¡ç®—æœºå¯åŠ¨æ—¶ï¼Œå°†è¿è¡Œ specialize é…ç½®é˜¶æ®µã€‚è¯¥é…ç½®é˜¶æ®µå°†åˆ›å»ºä¸€ä¸ªæ–°å®‰å…¨ ID (SID)ã€‚</td>
</tr>
<tr>
<td>/oobe</td>
<td>é‡æ–°å¯åŠ¨è®¡ç®—æœºè¿›å…¥ OOBE æ¨¡å¼ã€‚ä¾‹å¦‚ï¼š</td>
</tr>
<tr>
<td>Sysprep /generalize /shutdown /oobe</td>
<td>OOBE å…è®¸æœ€ç»ˆç”¨æˆ·è‡ªå®šä¹‰å…¶ Windows æ“ä½œç³»ç»Ÿã€åˆ›å»ºç”¨æˆ·å¸æˆ·ã€å‘½åè®¡ç®—æœºå’Œæ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚Sysprep åœ¨ OOBE å¯åŠ¨å‰ï¼Œå°†å¤„ç†åº”ç­”æ–‡ä»¶ä¸­ oobeSystem é…ç½®é˜¶æ®µçš„æ‰€æœ‰è®¾ç½®ã€‚</td>
</tr>
<tr>
<td>/mode:vm</td>
<td>Windows(R) 8 çš„æ–°å¢å†…å®¹ã€‚ä¸€èˆ¬åŒ–è™šæ‹Ÿç¡¬ç›˜ (VHD)ï¼Œè¿™æ ·å¯ä»¥å°†å…¶éƒ¨ç½²ä¸ºç›¸åŒè™šæ‹Ÿæœº (VM) æˆ–è™šæ‹Ÿæœºç›‘æ§ç¨‹åºä¸Šçš„ VHDã€‚VM é‡æ–°å¯åŠ¨åï¼Œè¯¥ VM å¯ä»¥å¼•å¯¼åˆ° OOBEã€‚ä¾‹å¦‚ï¼š</td>
</tr>
<tr>
<td>Sysprep /generalize /oobe /mode:vm</td>
<td>ä»…æœ‰çš„é€‚ç”¨äº VM æ¨¡å¼çš„é¢å¤–äº¤æ¢æœºä¸ºâ€œ/rebootâ€ã€â€œ/shutdownâ€å’Œâ€œ/quitâ€ã€‚å¿…é¡»ä½¿ç”¨ç›¸åŒçš„ç¡¬ä»¶é…ç½®æ–‡ä»¶åœ¨è™šæ‹Ÿæœºæˆ–è™šæ‹Ÿæœºç›‘æ§ç¨‹åºä¸Šéƒ¨ç½² VHDã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å·²åœ¨ Microsoft Hyper-V ä¸­åˆ›å»º VHDï¼Œä»…å¯ä»¥ä½¿ç”¨åŒ¹é…çš„ç¡¬ä»¶é…ç½®æ–‡ä»¶å°† VHD éƒ¨ç½²åˆ° Microsoft Hyper-V VMã€‚ä½¿ç”¨ä¸åŒçš„ç¡¬ä»¶é…ç½®æ–‡ä»¶å°† VHD éƒ¨ç½²åˆ°ä¸åŒçš„ VM å¯èƒ½ä¼šå¯¼è‡´æ„å¤–çš„é—®é¢˜ã€‚</td>
</tr>
<tr>
<td>/reboot</td>
<td>é‡æ–°å¯åŠ¨è®¡ç®—æœºã€‚å¯ä»¥ä½¿ç”¨è¯¥é€‰é¡¹å®¡æ ¸è®¡ç®—æœºå¹¶ç¡®ä¿é¦–æ¬¡è¿è¡Œä½“éªŒæ­£ç¡®å·¥ä½œã€‚</td>
</tr>
<tr>
<td>/shutdown</td>
<td>åœ¨ sysprep å‘½ä»¤å®Œæˆè¿è¡Œåå…³é—­è®¡ç®—æœºã€‚</td>
</tr>
<tr>
<td>/quiet</td>
<td>è¿è¡Œ Sysprep å·¥å…·è€Œä¸æ˜¾ç¤ºå±å¹•ç¡®è®¤æ¶ˆæ¯ã€‚å¦‚æœè‡ªåŠ¨è¿è¡Œ Sysprep å·¥å…·ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¯¥é€‰é¡¹ã€‚</td>
</tr>
<tr>
<td>/quit</td>
<td>Sysprep è¿è¡ŒæŒ‡å®šå‘½ä»¤åï¼Œæ— éœ€é‡æ–°å¯åŠ¨æˆ–å…³é—­è®¡ç®—æœºå³å¯å…³é—­ Sysprep å·¥å…·ã€‚</td>
</tr>
<tr>
<td>/unattend:<answerfile></td>
<td>åœ¨æ— äººå‚ä¸çš„å®‰è£…è¿‡ç¨‹ä¸­ï¼Œå°†åº”ç­”æ–‡ä»¶ä¸­çš„è®¾ç½®åº”ç”¨åˆ° Windowsï¼Œå…¶ä¸­ <answerfile> æŒ‡å®šè¦ä½¿ç”¨çš„åº”ç­”æ–‡ä»¶çš„è·¯å¾„å’Œæ–‡ä»¶åã€‚ä¾‹å¦‚ï¼šSysprep /audit /reboot /unattend:F:\Unattend.xml å…¶ä¸­ F æ˜¯åº”ç­”æ–‡ä»¶ (Unattend.xml) æ‰€åœ¨çš„ä¾¿æºå­˜å‚¨è®¾å¤‡çš„é©±åŠ¨å™¨å·ã€‚</td>
</tr>
</tbody>
</table>
<h1 id="importanté‡è¦äº‹é¡¹">Importanté‡è¦äº‹é¡¹</h1>
<p>å¿…é¡»ä½¿ç”¨ Sysprep /generalize å‘½ä»¤å¯¹å®Œæ•´çš„ Windows å®‰è£…ä¸€èˆ¬åŒ–ï¼Œæ‰å¯ä»¥ä½¿ç”¨è¯¥å®‰è£…å¯¹æ–°è®¡ç®—æœºè¿›è¡Œéƒ¨ç½²ï¼Œæ— è®ºæ˜¯ä½¿ç”¨æ˜ åƒã€ç¡¬ç›˜å¤åˆ¶ï¼Œè¿˜æ˜¯å…¶ä»–æ–¹æ³•å‡å¯ã€‚ä¸è¿è¡Œ Sysprep /generalize å‘½ä»¤è€Œå°† Windows æ˜ åƒç§»åŠ¨æˆ–å¤åˆ¶åˆ°å…¶ä»–è®¡ç®—æœºçš„åšæ³•ä¸å—æ”¯æŒã€‚</p>
<h1 id="å‘½ä»¤è¡Œ">å‘½ä»¤è¡Œ</h1>
<p><code>sysprep.exe /generalize /reboot /oobe</code></p>
<h1 id="failure-occurred-while-executing-sysprep_clean_validate_opk-from-cwindowssystem32spopkdll">Failure occurred while executing &lsquo;Sysprep_Clean_Validate_Opk&rsquo; from C:\Windows\System32\spopk.dll</h1>
<h2 id="take-ownership-of-the-file">Take ownership of the file:</h2>
<p><code>takeown /f C:\Windows\System32\spopk.dll</code></p>
<h2 id="grant-ability-to-modify-file">Grant ability to modify file:</h2>
<p><code>icacls C:\Windows\System32\spopk.dll /Grant Administrators:f</code></p>
<h1 id="é¢„è®¾appxåˆ é™¤">é¢„è®¾appxåˆ é™¤</h1>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ps" data-lang="ps"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">Get-AppxProvisionedPackage</span> <span style="color:#900;font-weight:bold">-online</span> <span style="color:#900;font-weight:bold">|</span> <span style="color:#900;font-weight:bold">Out-GridView</span> <span style="color:#900;font-weight:bold">-PassThru</span> <span style="color:#900;font-weight:bold">|</span> <span style="color:#900;font-weight:bold">Remove-AppxProvisionedPackage</span> <span style="color:#900;font-weight:bold">-online</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">Get-AppxPackage</span> <span style="color:#900;font-weight:bold">-AllUsers</span> <span style="color:#900;font-weight:bold">|</span> <span style="color:#900;font-weight:bold">Out-GridView</span> <span style="color:#900;font-weight:bold">-PassThru</span> <span style="color:#900;font-weight:bold">|</span> <span style="color:#900;font-weight:bold">Remove-AppxPackage</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="from">From</h1>
<p><a href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/sysprep--generalize--a-windows-installation">https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/sysprep&ndash;generalize&ndash;a-windows-installation</a></p>
<p><a href="http://www.edugeek.net/forums/windows-10/207219-problem-sysprep-windows-10-1903-a.html">http://www.edugeek.net/forums/windows-10/207219-problem-sysprep-windows-10-1903-a.html</a></p>
</div>
<div class="disqus">
  <div id="disqus_thread"></div>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css">
<script src="https://cdn.jsdelivr.net/gh/sy123s/blog@master/js/disqus.js"></script>
<script>
var dsqjs = new DisqusJS({
    shortname: 'sy123-ml',
    siteName: 'zhili',
    identifier: '',
    url: '',
    title: '',
    api: 'https://disqus.gd2.workers.dev/api/',
    apikey: 'gZw0N3utfdxezjRheJwLz3xkiUcRWno3ruWSIROPHRcYNGmwBosRpnyb8MmiknVg',
    admin: 'disqus_wvCW9l8bmG',
    adminLabel: 'zhili'
});
</script>
                            
</div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2022 zhili.</div>
  </div>
</footer>
</body>
</html>
