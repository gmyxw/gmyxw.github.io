<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="zhili">
<meta name="description" content="Sed magna purus, fermentum eu, tincidunt eu, varius ut, felis. Morbi mollis tellus ac sapien. Vestibulum ullamcorper mauris at ligula. In hac habitasse platea dictumst. Vivamus in erat ut urna cursus vestibulum.
    ">
<meta name="keywords" content="ÂçöÂÆ¢, ÊäÄÊúØ, ÁîüÁâ©‰ø°ÊÅØÔºåÁ≤æÂáÜÂåªÁñó, ÈÅó‰º†Âí®ËØ¢, È´òÈÄöÈáèÊäÄÊúØ, ÁÆóÊ≥ï, Â≠¶‰π†, ‰ΩúÂìÅ, ÂÜô‰Ωú, C&#43;&#43;, Perl">
<meta name="referrer" content="always">
<title>linux‰∏≠Â¶Ç‰ΩïÊâãÂä®Ê∏ÖÈõ∂ÁºìÂÜ≤ - zhili</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="/logo/favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <a href="https://sy123.netlify.app/">zhili</a> ‚ùØ
      <a href="/linux%e4%b8%ad%e5%a6%82%e4%bd%95%e6%89%8b%e5%8a%a8%e6%b8%85%e9%9b%b6%e7%bc%93%e5%86%b2">Linux‰∏≠Â¶Ç‰ΩïÊâãÂä®Ê∏ÖÈõ∂ÁºìÂÜ≤</a>/</h1>
  </div>
  <nav><a href="/file/">Files</a><a href="/tags/">Tags</a><a href="/about/">About</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>linux‰∏≠Â¶Ç‰ΩïÊâãÂä®Ê∏ÖÈõ∂ÁºìÂÜ≤</h1>
  </div>
<div class="meta">
  <div>üïì2020-02-16 15:20</div>
  <div>
    <span><a href="https://sy123.netlify.app/tags/linux/">#linux</a></span>
      </div>
  </div>
<div class="content">
  <h2 id="emptying-the-buffers-cache">Emptying the buffers cache</h2>
<p>If you ever want to empty it you can use this chain of commands.</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>free <span style="color:#000;font-weight:bold">&amp;&amp;</span> sync <span style="color:#000;font-weight:bold">&amp;&amp;</span> <span style="color:#0086b3">echo</span> <span style="color:#099">3</span> &gt; /proc/sys/vm/drop_caches <span style="color:#000;font-weight:bold">&amp;&amp;</span> free
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>             total       used       free     shared    buffers     cached
</span></span><span style="display:flex;"><span>Mem:       <span style="color:#099">1018916</span>     <span style="color:#099">980832</span>      <span style="color:#099">38084</span>          <span style="color:#099">0</span>      <span style="color:#099">46924</span>     <span style="color:#099">355764</span>
</span></span><span style="display:flex;"><span>-/+ buffers/cache:     <span style="color:#099">578144</span>     <span style="color:#099">440772</span>
</span></span><span style="display:flex;"><span>Swap:      <span style="color:#099">2064376</span>        <span style="color:#099">128</span>    <span style="color:#099">2064248</span>
</span></span><span style="display:flex;"><span>             total       used       free     shared    buffers     cached
</span></span><span style="display:flex;"><span>Mem:       <span style="color:#099">1018916</span>     <span style="color:#099">685008</span>     <span style="color:#099">333908</span>          <span style="color:#099">0</span>        <span style="color:#099">224</span>     <span style="color:#099">108252</span>
</span></span><span style="display:flex;"><span>-/+ buffers/cache:     <span style="color:#099">576532</span>     <span style="color:#099">442384</span>
</span></span><span style="display:flex;"><span>Swap:      <span style="color:#099">2064376</span>        <span style="color:#099">128</span>    <span style="color:#099">2064248</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can signal the Linux Kernel to drop various aspects of cached items by changing the numeric argument to the above command.</p>
<p>To free pagecache:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0086b3">echo</span> <span style="color:#099">1</span> &gt; /proc/sys/vm/drop_caches
</span></span></code></pre></td></tr></table>
</div>
</div><p>To free dentries and inodes:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0086b3">echo</span> <span style="color:#099">2</span> &gt; /proc/sys/vm/drop_caches
</span></span></code></pre></td></tr></table>
</div>
</div><p>To free pagecache, dentries and inodes:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0086b3">echo</span> <span style="color:#099">3</span> &gt; /proc/sys/vm/drop_caches
</span></span></code></pre></td></tr></table>
</div>
</div><p>The above are meant to be run as root. If you&rsquo;re trying to do them using sudo then you&rsquo;ll need to change the syntax slightly to something like these:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ sudo sh -c <span style="color:#d14">&#39;echo 1 &gt;/proc/sys/vm/drop_caches&#39;</span>
</span></span><span style="display:flex;"><span>$ sudo sh -c <span style="color:#d14">&#39;echo 2 &gt;/proc/sys/vm/drop_caches&#39;</span>
</span></span><span style="display:flex;"><span>$ sudo sh -c <span style="color:#d14">&#39;echo 3 &gt;/proc/sys/vm/drop_caches&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>NOTE: There&rsquo;s a more esoteric version of the above command if you&rsquo;re into that:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ <span style="color:#0086b3">echo</span> <span style="color:#d14">&#34;echo 1 &gt; /proc/sys/vm/drop_caches&#34;</span> | sudo sh
</span></span></code></pre></td></tr></table>
</div>
</div><p>Why the change in syntax? The /bin/echo program is running as root, because of sudo, but the shell that&rsquo;s redirecting echo&rsquo;s output to the root-only file is still running as you. Your current shell does the redirection before sudo starts.</p>
<p>Seeing what&rsquo;s in the buffers and cache
Take a look at linux-ftools if you&rsquo;d like to analyze the contents of the buffers &amp; cache. Specifically if you&rsquo;d like to see what files are currently being cached.</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>fincore
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># With this tool you can see what files are being cached within a give directory.</span>
</span></span><span style="display:flex;"><span>fincore <span style="color:#000;font-weight:bold">[</span>options<span style="color:#000;font-weight:bold">]</span> files...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  --pages<span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">false</span>      Do not print pages
</span></span><span style="display:flex;"><span>  --summarize        When comparing multiple files, print a summary report
</span></span><span style="display:flex;"><span>  --only-cached      Only print stats <span style="color:#000;font-weight:bold">for</span> files that are actually in cache.
</span></span><span style="display:flex;"><span>For example, /var/lib/mysql/blogindex:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>root@xxxxxx:/var/lib/mysql/blogindex## fincore --pages<span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">false</span> --summarize --only-cached * 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> CLUSTER_LOG_2010_05_21.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">93840384</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">22910</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>4096, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>0.004365 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> CLUSTER_LOG_2010_05_22.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">417792</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">102</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>4096, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>0.980392 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> CLUSTER_LOG_2010_05_23.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">826368</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">201</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>4096, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>0.497512 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> CLUSTER_LOG_2010_05_24.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">192512</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">47</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>4096, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>2.127660 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> CLUSTER_LOG_2010_06_03.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">345088</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">84</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">43</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>176128, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>51.190476 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> CLUSTER_LOG_2010_06_04.MYD: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1478552</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">360</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">97</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>397312, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>26.944444 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> CLUSTER_LOG_2010_06_04.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">205824</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">50</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">29</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>118784, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>58.000000 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> COMMENT_CONTENT_2010_06_03.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">100051968</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">24426</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">10253</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>41996288, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>41.975764 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> COMMENT_CONTENT_2010_06_04.MYD: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">716369644</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">174894</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">79821</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>326946816, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>45.639645 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> COMMENT_CONTENT_2010_06_04.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">56832000</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">13875</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5365</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>21975040, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>38.666667 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> FEED_CONTENT_2010_06_03.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1001518080</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">244511</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">98975</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>405401600, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>40.478751 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> FEED_CONTENT_2010_06_04.MYD: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">9206385684</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2247652</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1018661</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>4172435456, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>45.321117 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> FEED_CONTENT_2010_06_04.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">638005248</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">155763</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">52912</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>216727552, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>33.969556 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> FEED_CONTENT_2010_06_04.frm: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">9840</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>12288, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>150.000000 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> PERMALINK_CONTENT_2010_06_03.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1035290624</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">252756</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">108563</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>444674048, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>42.951700 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> PERMALINK_CONTENT_2010_06_04.MYD: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">55619712720</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">13579031</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">6590322</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>26993958912, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>48.533080 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> PERMALINK_CONTENT_2010_06_04.MYI: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">659397632</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">160985</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">54304</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>222429184, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>33.732335 
</span></span><span style="display:flex;"><span>stats <span style="color:#000;font-weight:bold">for</span> PERMALINK_CONTENT_2010_06_04.frm: file <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">10156</span> , total <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span> , cached <span style="color:#008080">pages</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span> , cached <span style="color:#008080">size</span><span style="color:#000;font-weight:bold">=</span>12288, cached <span style="color:#008080">perc</span><span style="color:#000;font-weight:bold">=</span>150.000000 
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>total cached size: <span style="color:#099">32847278080</span>
</span></span><span style="display:flex;"><span>With the above output you can see that there are several *.MYD, *.MYI, and *.frm files that are currently being cached.
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="swap">Swap</h2>
<p>If you want to clear out your swap you can use the following commands.</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ free
</span></span><span style="display:flex;"><span>             total       used       free     shared    buffers     cached
</span></span><span style="display:flex;"><span>Mem:       <span style="color:#099">7987492</span>    <span style="color:#099">7298164</span>     <span style="color:#099">689328</span>          <span style="color:#099">0</span>      <span style="color:#099">30416</span>     <span style="color:#099">457936</span>
</span></span><span style="display:flex;"><span>-/+ buffers/cache:    <span style="color:#099">6809812</span>    <span style="color:#099">1177680</span>
</span></span><span style="display:flex;"><span>Swap:      <span style="color:#099">5963772</span>     <span style="color:#099">609452</span>    <span style="color:#099">5354320</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then use this command to disable swap:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ swapoff -a
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can confirm that it&rsquo;s now empty:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ free
</span></span><span style="display:flex;"><span>             total       used       free     shared    buffers     cached
</span></span><span style="display:flex;"><span>Mem:       <span style="color:#099">7987492</span>    <span style="color:#099">7777912</span>     <span style="color:#099">209580</span>          <span style="color:#099">0</span>      <span style="color:#099">39332</span>     <span style="color:#099">489864</span>
</span></span><span style="display:flex;"><span>-/+ buffers/cache:    <span style="color:#099">7248716</span>     <span style="color:#099">738776</span>
</span></span><span style="display:flex;"><span>Swap:            <span style="color:#099">0</span>          <span style="color:#099">0</span>          <span style="color:#099">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>And to re-enable it:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ swapon -a
</span></span></code></pre></td></tr></table>
</div>
</div><p>And now reconfirm with free:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ free
</span></span><span style="display:flex;"><span>             total       used       free     shared    buffers     cached
</span></span><span style="display:flex;"><span>Mem:       <span style="color:#099">7987492</span>    <span style="color:#099">7785572</span>     <span style="color:#099">201920</span>          <span style="color:#099">0</span>      <span style="color:#099">41556</span>     <span style="color:#099">491508</span>
</span></span><span style="display:flex;"><span>-/+ buffers/cache:    <span style="color:#099">7252508</span>     <span style="color:#099">734984</span>
</span></span><span style="display:flex;"><span>Swap:      <span style="color:#099">5963772</span>          <span style="color:#099">0</span>    <span style="color:#099">5963772</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
<div class="disqus">
  <div id="disqus_thread"></div>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css">
<script src="https://cdn.jsdelivr.net/gh/sy123s/blog@master/js/disqus.js"></script>
<script>
var dsqjs = new DisqusJS({
    shortname: 'sy123-ml',
    siteName: 'zhili',
    identifier: '',
    url: '',
    title: '',
    api: 'https://disqus.gd2.workers.dev/api/',
    apikey: 'gZw0N3utfdxezjRheJwLz3xkiUcRWno3ruWSIROPHRcYNGmwBosRpnyb8MmiknVg',
    admin: 'disqus_wvCW9l8bmG',
    adminLabel: 'zhili'
});
</script>
                            
</div>

  </article>
</main>
<footer>
  <div>
    <div>
      2007-2022 zhili.</div>
  </div>
</footer>
</body>
</html>
